!function(){angular.module("appModule",["ngRoute","ngCookies","ui.bootstrap","clientModule","vehicleModule","app","vehicleEntranceModule"]),angular.module("appModule").constant("systemConfig",{apiUrl:"localhost"===location.hostname?"http://localhost:8080":location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}),angular.module("appModule").config(["$routeProvider",function(e){e.when("/",{redirectTo:"/account/home"}).when("/login",{templateUrl:"app/system/login/login.html",controller:"LoginController"}).when("/account/home",{templateUrl:"app/service/vehicle-entrance/vehicle-entrance.html",controller:"vehicleEntranceController"}).when("/reports/general/report-viewer",{templateUrl:"app/reports/report-viewer/report-viewer.html",controller:"ReportViewerController"}).when("/master/create-account",{templateUrl:"app/master/create-account/create-account.html",controller:"createAccountController"}).when("/setting/account-settings",{templateUrl:"app/master/account-settings/account-settings.html"}).when("/transaction/bank-reconciliation",{templateUrl:"app/accounts/bank-reconciliation/bank-reconciliation.html",controller:"bankReconciliationController"}).when("/transaction/fund-transfer",{templateUrl:"app/accounts/fund-transfer/fund-transfer.html",controller:"fundTransferController"}).when("/transaction/general-voucher",{templateUrl:"app/accounts/voucher/voucher.html",controller:"voucherController"}).when("/transaction/trial-balance",{templateUrl:"app/accounts/trial-balance/trial-balance.html",controller:"trialBalanceController"}).when("/transaction/supplier-payment",{templateUrl:"app/accounts/supplier-payment/supplier-payment.html",controller:"supplierPaymentController"}).when("/transaction/return-cheque",{templateUrl:"app/accounts/return-cheque/return-cheque.html",controller:"returnChequeController"}).when("/transaction/accrued-bill",{templateUrl:"app/accounts/accrued-bill/accrued-bill.html",controller:"accruedBillController"}).when("/transaction/journal",{templateUrl:"app/accounts/journal/journal.html",controller:"journalController"}).otherwise({redirectTo:"/"})}])}(),function(){angular.module("appModule").controller("accruedBillController",["$scope","accruedBillModel","$timeout","$filter","Notification","ConfirmPane",function(e,t,n,a,i,o){e.model=new t,e.ui={},e.model.currentBranch={},e.model.type=null,e.ui.focus=function(e){n(function(){document.querySelectorAll(e)[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.ui.focus("#account"),e.model.tempData.transactionDate=new Date,e.model.data.transactionDate=new Date,e.model.tempData.branch=e.model.data.branch},e.ui.addData=function(){var t=!0;e.model.tempData.accAccount||(t=!1,i.error("select a account to add !")),e.model.tempData.branch||(t=!1,i.error("select a branch to add !")),e.model.tempData.description||(t=!1,i.error("insert description to add !")),e.model.data.transactionDate||(t=!1,i.error("insert a Date to add !")),e.model.tempData.debit||(t=!1,i.error("insert amount to add !")),e.model.data.accAccount||(t=!1,i.error("select a main account to add !")),e.model.data.typeIndexNo||(t=!1,i.error("select an accrued account to save !")),a("date")(e.model.data.transactionDate,"yyyy-MM-dd")>a("date")(new Date,"yyyy-MM-dd")&&(t=!1,i.error("transfer date not valid ! ")),t&&(e.model.addData(),e.ui.new(),e.ui.focus("#subAccount"))},e.ui.save=function(){var t=!0;e.model.data.accAccount||(t=!1,i.error("select a main account to save !")),0===e.model.saveDataList.length&&(t=!1,i.error("empty transfer item to save !")),e.model.data.credit||(t=!1,i.error("total value 0.00 !")),e.model.data.description||(t=!1,i.error("insert description to save !")),a("date")(e.model.data.transactionDate,"yyyy-MM-dd")>a("date")(new Date,"yyyy-MM-dd")&&(t=!1,i.error("transfer date not valid ! ")),t&&o.primaryConfirm("DO YOU WANT TO SAVE THIS FUND TRANSFER !").confirm(function(){e.model.save().then(function(t){i.success("payment voucher save Sucess"),e.ui.mode="IDEAL",e.model.data={},e.model.saveDataList=[]})})},e.ui.edit=function(t,n){e.model.tempData=n,e.model.saveDataList.splice(t,1),e.model.totalCalculation()},e.ui.delete=function(t){e.model.saveDataList.splice(t,1),e.model.totalCalculation()},e.ui.selectAccType=function(t){e.model.selectAccType=t,e.model.type=t.value,e.ui.focus("#account"),e.model.setClear(),console.log(e.model.selectAccType)},e.ui.focusAdd=function(t){13===t.which&&e.ui.addData()},e.ui.init=function(){e.ui.mode="IDEAL"},e.ui.init()}])}(),function(){angular.module("appModule").factory("accruedBillFactory",function(){var e={};return e.Data=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:"accrued_bill",refNumber:null,type:"accrued",typeIndexNo:null,description:"",chequeDate:null,bankReconciliation:!1,reconcileAccount:null,reconcileGroup:0}},e.tempData=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:"accrued_bill",refNumber:null,type:"accrued",typeIndexNo:null,description:"",chequeDate:null,bankReconciliation:!1,reconcileAccount:null,reconcileGroup:0}},e})}(),function(){var e=function(e,t,n,a,i,o){function c(){this.constructor()}return c.prototype={data:{},tempData:{},currentBranch:{},selectAccType:{},accAccountList:[],branchList:[],supplierList:[],saveDataList:[],accTypeList:[],accflowList:[],constructor:function(){var n=this;n.data=e.Data(),n.tempData=e.tempData(),t.loadBranch().success(function(e){n.branchList=e}),t.loadSupplier().success(function(e){n.supplierList=e}),t.currentBranch().success(function(e){n.currentBranch=e,n.data.branch=e.indexNo}),t.loadAccTypes().success(function(e){n.accTypeList=e}),this.loadAccAccount()},loadAccAccount:function(){var e=this;t.loadAccAccounts().success(function(t){e.accAccountList=t})},getValue:function(e){var n=this,a=null;angular.forEach(n.supplierList,function(t){if(e===parseInt(t.indexNo))return void(a=t.accAccount)}),n.data.accAccount=a,console.log(a),null!==a?(t.loadAccBalance(a).success(function(e){n.data.value=e}),n.setAccountFlow(a)):o.error("this supplier not link  to account system !")},setAccountFlow:function(e){var n=this;t.setAccFlow(e).success(function(e){n.accflowList=e,console.log(e)})},branchLable:function(e){var t;return angular.forEach(this.branchList,function(n){if(n.indexNo===e)return void(t=n.branchCode+" - "+n.name)}),t},supplierLable:function(e){var t;return angular.forEach(this.supplierList,function(n){if(n.indexNo===e)return void(t=n.indexNo+" - "+n.name)}),t},accountLable:function(e){var t;return angular.forEach(this.accAccountList,function(n){if(n.indexNo===e)return void(t=n.accCode+" - "+n.name)}),t},addData:function(){var t=this;this.tempData.transactionDate=i("date")(this.data.transactionDate,"yyyy-MM-dd"),this.saveDataList.push(this.tempData),this.tempData=e.tempData(),a(function(){t.totalCalculation()},30)},totalCalculation:function(){var e=0;angular.forEach(this.saveDataList,function(t){console.log(t),e+=parseFloat(t.debit)}),this.data.credit=e},save:function(){var e=this,a={};a.dataList=this.saveDataList,this.data.transactionDate=i("date")(this.data.transactionDate,"yyyy-MM-dd"),this.data.chequeDate=i("date")(this.data.chequeDate,"yyyy-MM-dd"),a.data=this.data,console.log(a);var o=n.defer();return t.saveFundTransfer(JSON.stringify(a)).success(function(t){e.saveDataList=[],o.resolve(t)}).error(function(e){o.reject(e)}),o.promise},setClear:function(){this.tempData=e.tempData(),this.data=e.Data(),this.tempData.transactionDate=new Date,this.data.transactionDate=new Date,this.tempData.branch=this.currentBranch.indexNo,this.data.branch=this.currentBranch.indexNo,this.saveDataList=[]}},c};e.$inject=["accruedBillFactory","accruedBillService","$q","$timeout","$filter","Notification"],angular.module("appModule").factory("accruedBillModel",e)}(),function(){var e=function(e,t){this.loadAccAccounts=function(){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-type-accounts")},this.currentBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch/current-branch")},this.loadBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch")},this.loadSupplier=function(){return e.get(t.apiUrl+"/api/care-point/master/supplier")},this.loadAccBalance=function(n){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-account-value/"+n)},this.loadAccTypes=function(){return e.get(t.apiUrl+"/api/care-point/master/account-type")},this.saveFundTransfer=function(n){return e.post(t.apiUrl+"/api/care-point/transaction/fund-transfer/save",n)},this.setAccFlow=function(n){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/get-account-flow/"+n)}};e.$inject=["$http","systemConfig"],angular.module("appModule").service("accruedBillService",e)}(),function(){angular.module("appModule").controller("bankReconciliationController",["$scope","$filter","bankReconciliationModel","$timeout","$uibModalStack","$uibModal","Notification","ConfirmPane",function(e,t,n,a,i,o,c,r){e.model=new n,e.ui={},e.model.currentBranch={},e.ui.focus=function(e){a(function(){document.querySelectorAll(e)[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.ui.focus("#bankAccount"),e.model.tempData.transactionDate=new Date},e.ui.selectReconciliationCheque=function(n){var a=!0;e.model.data.transactionDate||(a=!1,c.error("select a reconciliation date !")),e.model.data.accAccount||(a=!1,c.error("select an account to reconcile selected cheque !")),t("date")(e.model.data.transactionDate,"yyyy-MM-dd")>t("date")(new Date,"yyyy-MM-dd")&&(a=!1,c.error("transfer date not valid ! ")),a&&r.primaryConfirm("DO YOU WANT TO RECONCILE THIS CHEQUE !").confirm(function(){e.model.addReconciliationCheque(n)})},e.ui.addReconciliationData=function(){e.model.data.accAccount?(e.model.setIncomeExpenceAccount(),o.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"reconciliationPopup.html",scope:e,size:"lg"})):c.error("select a bank account to view oher reconcile popup ! ")},e.ui.addClass=function(e){return"reconcile"===e.class?"bg-danger":"other"===e.class?"bg-success":"background-dark"},e.ui.modelCancel=function(){i.dismissAll()},e.ui.save=function(){var t=!0;e.ui.reconcileCheque()||(t=!1,c.error("Reconcile Cheque is empty !")),t&&e.model.save()},e.ui.reconcileCheque=function(){var t=!1;return angular.forEach(e.model.saveDataList,function(e){if("reconcile"===e.class)return void(t=!0)}),t},e.ui.delete=function(t){t.class?e.model.remove(t):r.warningConfirm("DO YOU WANT TO DELETE THIS TRANSACTION !").confirm(function(){e.model.delete(t)})},e.ui.popupSelectAccAccount=function(t){e.model.disableValue="",angular.forEach(e.model.incomeExpenceAccList,function(n){if(n.indexNo===t)return void(e.model.disableValue=n.accMain.isExpence?"debit":"credit")})},e.ui.popupAddData=function(){var t=!0;e.model.tempData.accAccount||(t=!1,c.error("select an account to add data ")),e.model.tempData.branch||(t=!1,c.error("select a branch to add data")),e.model.tempData.transactionDate||(t=!1,c.error("select a date to add data")),e.model.tempData.credit||e.model.tempData.debit||(t=!1,c.error("add credit or debit amount to add date")),t&&e.model.popupAddData()},e.ui.popupSave=function(){var t=!0;e.model.popupDataList.length||(t=!1,c.error("Empty data to save")),t&&(e.model.popupSave(),e.ui.modelCancel())},e.ui.init=function(){e.ui.mode="IDEAL"},e.ui.init()}])}(),function(){angular.module("appModule").factory("bankReconciliationFactory",function(){var e={};return e.Data=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:"bank_reconciliation",refNumber:null,type:"reconciliation",typeIndexNo:null,description:"",chequeDate:null,monthStart:null,balance:0,deleteRefNo:0,reconcileAccount:null,reconcileGroup:0}},e.tempDate=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:"bank_reconciliation",refNumber:null,type:"reconciliation",typeIndexNo:null,description:"",chequeDate:null,deleteRefNo:0,reconcileAccount:null,reconcileGroup:0}},e})}(),function(){var e=function(e,t,n,a,i,o){function c(){this.constructor()}return c.prototype={data:{},tempData:{},currentBranch:{},accAccountList:[],incomeExpenceAccList:[],branchList:[],reconciliationList:[],saveDataList:[],popupDataList:[],accTypeList:[],totBalance:0,constructor:function(){var n=this;n.data=e.Data(),n.tempData=e.tempDate(),t.loadBranch().success(function(e){n.branchList=e}),t.currentBranch().success(function(e){n.currentBranch=e,n.data.branch=e.indexNo}),this.loadAccAccount()},loadAccAccount:function(){var e=this;t.loadAccAccounts().success(function(t){e.accAccountList=t})},selectBankAccount:function(e,n){var a=this,o=i("date")(n,"yyyy-MM-dd");t.getReconciliationDetail(e,o).success(function(e){a.reconciliationList=e,a.reconciliationValueCaluclator()}),t.loadAccBalance(e).success(function(e){a.data.value=e})},selectDate:function(){this.reconciliationList.length||this.selectBankAccount(this.data.accAccount,this.data.transactionDate);var e=i("date")(this.data.transactionDate,"yyyy"),n=i("date")(this.data.transactionDate,"MM"),a=e+"-"+n+"-1",o=this;t.getStartBalance(a,this.data.accAccount).success(function(e){o.data.monthStart=e,o.totBalance=e}),this.saveDataList.length||o.loadTransactions(e,n,o.data.accAccount)},loadTransactions:function(n,a,i){var o=this,c=n+"-"+a+"-1";console.log("load Transaction"),t.loadTransactions(n,a,i).success(function(t){o.saveDataList=t;var n=e.Data();n.transactionDate=new Date(c),n.description="B / f ",n.balance=o.data.monthStart,o.saveDataList.unshift(n),o.balanceCalculator()})},balanceCalculator:function(){var e=this;e.saveDataList=i("orderBy")(e.saveDataList,"transactionDate"),e.totBalance=e.data.monthStart;var t=0,n=0;angular.forEach(e.saveDataList,function(a){e.totBalance+=a.debit,e.totBalance-=a.credit,a.balance=e.totBalance,t+=a.debit,n+=a.credit}),e.data.value=e.totBalance,e.data.creditTotal=n,e.data.debitTotal=t},reconciliationValueCaluclator:function(){var e=0,t=0;angular.forEach(this.reconciliationList,function(n){e+=n.debit,t+=n.credit}),this.data.reconcileValue=e-t},addReconciliationCheque:function(e){var t=this;angular.forEach(this.reconciliationList,function(n,a){e.class="reconcile",e.transactionDate=i("date")(t.data.transactionDate,"yyyy-MM-dd"),e.indexNo===n.indexNo&&(t.saveDataList.push(e),t.reconciliationList.splice(a,1))}),t.reconciliationValueCaluclator(),t.balanceCalculator()},branchLable:function(e){var t;return angular.forEach(this.branchList,function(n){if(n.indexNo===e)return void(t=n.branchCode+" - "+n.name)}),t},accountLable:function(e){var t;return angular.forEach(this.accAccountList,function(n){if(n.indexNo===e)return void(t=n.indexNo+" - "+n.name)}),t},save:function(){var a=n.defer(),i=this,c=[];angular.forEach(this.saveDataList,function(e){"reconcile"===e.class&&c.push(e)});var r={data:this.data,dataList:c};t.saveBankReconciliation(JSON.stringify(r)).success(function(t){o.success("Reconcile Cheque Save Success"),i.saveDataList=[],i.reconciliationList=[],i.data=e.Data(),a.resolve(t)}).error(function(e){a.reject(e)})},remove:function(e){var t=this;angular.forEach(this.saveDataList,function(n,a){if(e===parseInt(n.indexNo))return t.saveDataList.splice(a,1),void t.reconciliationValueCaluclator()}),t.getDeleteReconciliationCheque(e),t.balanceCalculator()},delete:function(e){var n=this;t.delete(e.deleteRefNo).success(function(t){angular.forEach(n.saveDataList,function(t,a){if(console.log(e.indexNo+" = "+t.indexNo),e.indexNo===parseInt(t.indexNo))return void n.saveDataList.splice(a,1)}),n.balanceCalculator(),o.success("delete success")})},getDeleteReconciliationCheque:function(e){var n=this;t.getDeleteReconciliationCheque(e).success(function(e){n.reconciliationList.push(e),n.reconciliationValueCaluclator()})},setIncomeExpenceAccount:function(){var e=this;angular.forEach(this.accAccountList,function(t){(t.accMain.isExpence||t.accMain.isIncome)&&e.incomeExpenceAccList.push(t)})},popupAddData:function(){var t=this;t.tempData.transactionDate=i("date")(t.tempData.transactionDate,"yyyy-MM-dd"),t.popupDataList.push(t.tempData),t.tempData=e.tempDate(),t.tempData.branch=t.currentBranch.indexNo},popupSave:function(){var e=n.defer(),a=this,c={data:a.data,dataList:a.popupDataList};console.log(c),t.savePopupData(JSON.stringify(c)).success(function(t){o.success("Other Reconcile data Save Success !"),a.popupDataList=[];var n=i("date")(a.data.transactionDate,"yyyy"),c=i("date")(a.data.transactionDate,"MM");a.loadTransactions(n,c,a.data.accAccount),e.resolve(t)}).error(function(t){e.reject(t)})}},c};e.$inject=["bankReconciliationFactory","bankReconciliationService","$q","$timeout","$filter","Notification"],angular.module("appModule").factory("bankReconciliationModel",e)}(),function(){var e=function(e,t){this.loadAccAccounts=function(){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-only-account")},this.currentBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch/current-branch")},this.loadBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch")},this.loadAccBalance=function(n){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-account-value-all/"+n)},this.getReconciliationDetail=function(n,a){return e.get(t.apiUrl+"/api/care-point/transaction/bank-reconciliation/get-reconciliation-detail/"+a+"/"+n)},this.getStartBalance=function(n,a){return e.get(t.apiUrl+"/api/care-point/transaction/bank-reconciliation/get-start-balance/"+n+"/"+a)},this.loadTransactions=function(n,a,i){return e.get(t.apiUrl+"/api/care-point/transaction/bank-reconciliation/load-transactions/"+n+"/"+a+"/"+i)},this.saveBankReconciliation=function(n){return e.post(t.apiUrl+"/api/care-point/transaction/bank-reconciliation/save",n)},this.savePopupData=function(n){return e.post(t.apiUrl+"/api/care-point/transaction/bank-reconciliation/savePopup",n)},this.getDeleteReconciliationCheque=function(n){return e.get(t.apiUrl+"/api/care-point/transaction/bank-reconciliation/get-delete-reconciliation-cheque/"+n)},this.delete=function(n){return e.delete(t.apiUrl+"/api/care-point/transaction/bank-reconciliation/delete/"+n)}};e.$inject=["$http","systemConfig"],angular.module("appModule").service("bankReconciliationService",e)}(),function(){angular.module("appModule").controller("journalController",["$scope","journalModel","$timeout","Notification","ConfirmPane",function(e,t,n,a,i){e.model=new t,e.ui={},e.ui.focus=function(e){n(function(){document.querySelectorAll(e)[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.ui.focus("#date"),e.model.new()},e.ui.save=function(){var t=!0;e.model.data.transactionDate||(t=!1,a.error("insert date to save !")),e.model.data.description||(t=!1,a.error("insert description to save !")),e.model.dataList.length||(t=!1,a.error("insert data to save !")),e.model.data.totalDebit!==e.model.data.totalCredit&&0!==e.model.data.totalCredit&&(t=!1,a.error("total debit and credit amount is deference!")),t&&i.successConfirm("DO YOU WANT TO SAVE !").confirm(function(){e.model.save().then(function(t){a.success(t+" data records save success !"),e.ui.mode="IDEAL"})})},e.ui.addData=function(){var t=!0;e.model.data.transactionDate||(t=!1,a.error("insert date to add !")),e.model.data.description||(t=!1,a.error("insert description to add !")),e.model.tempData.debit||e.model.tempData.credit||(t=!1,a.error("insert debit or credit amount to add !")),e.model.tempData.debit&&e.model.tempData.credit&&(t=!1,a.error("invalied debit and credit amount !")),e.model.tempData.accAccount||(t=!1,a.error("select a account name to add !")),e.model.tempData.branch||(t=!1,a.error("select a branch name to add !")),t&&(e.model.add(),e.ui.focus("#accMain"))},e.ui.focusAddFunction=function(t){13===(t?t.keyCode||t.which:13)&&e.ui.addData()},e.ui.init=function(){e.ui.mode="IDEAL"},e.ui.init()}])}(),function(){angular.module("appModule").factory("journalFactory",function(){var e={};return e.Data=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:null,refNumber:null,type:null,typeIndexNo:null,description:null,bankReconciliation:!1,reconcileAccount:null}},e.tempData=function(){return{accMain:null,accountName:null,branch:null,debit:0,credit:0,cop:!1,description:null,date:null}},e})}(),function(){var e=function(e,t,n,a,i){function o(){this.constructor()}return o.prototype={data:{},tempData:{},currentBranch:{},dataList:[],accAccountList:[],accflowList:[],branchList:[],constructor:function(){var n=this;n.data=e.Data(),n.tempData=e.tempData(),t.loadAccAccounts().success(function(e){n.accAccountList=e}),t.loadBranch().success(function(e){n.branchList=e}),t.currentBranch().success(function(e){n.currentBranch=e})},setAccountFlow:function(e){var n=this;t.setAccFlow(e).success(function(e){n.accflowList=e,console.log(e)})},new:function(){this.data.transactionDate=new Date,this.tempData.branch=this.currentBranch.indexNo},accountLable:function(e){var t;return angular.forEach(this.accAccountList,function(n){if(n.indexNo===e)return void(t=n.accCode+" - "+n.name)}),t},branchLable:function(e){var t;return angular.forEach(this.branchList,function(n){if(n.indexNo===e)return void(t=n.branchCode+" - "+n.name)}),t},setMainAccount:function(e){this.setAccountFlow(e)},add:function(){var t={};t.indexNo=null,t.transactionDate=a("date")(new Date(this.data.transactionDate),"yyyy-MM-dd"),t.currentDate=null,t.time=null,t.branch=this.tempData.branch,t.currentBranch=null,t.user=null,t.debit=this.tempData.debit,t.credit=this.tempData.credit,t.accAccount=this.tempData.accAccount,t.formName=null,t.refNumber=null,t.type=null,t.typeIndexNo=null,t.description=this.data.description,this.dataList.unshift(t),this.tempData=e.tempData(),this.totalCalculated()},totalCalculated:function(){var e=0,t=0;angular.forEach(this.dataList,function(n){e+=n.debit,t+=n.credit}),this.data.totalDebit=e,this.data.totalCredit=t},save:function(){var e=n.defer(),a=this;return t.saveJournal(JSON.stringify(a.dataList)).success(function(t){a.refresh(),e.resolve(t)}).error(function(t){e.reject(t)}),e.promise},refresh:function(){this.data=e.Data(),this.tempData=e.tempData(),this.dataList=[],this.accflowList=[]}},o};e.$inject=["journalFactory","journalService","$q","$filter","Notification"],angular.module("appModule").factory("journalModel",e)}(),function(){var e=function(e,t){this.loadAccAccounts=function(){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-only-account")},this.loadBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch")},this.currentBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch/current-branch")},this.setAccFlow=function(n){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/get-account-flow/"+n)},this.saveJournal=function(n){return e.post(t.apiUrl+"/api/care-point/transaction/journal/save",n)}};e.$inject=["$http","systemConfig"],angular.module("appModule").service("journalService",e)}(),function(){angular.module("appModule").controller("fundTransferController",["$scope","fundTransferModel","$timeout","$filter","Notification","ConfirmPane",function(e,t,n,a,i,o){e.model=new t,e.ui={},e.model.currentBranch={},e.model.type=null,e.ui.focus=function(e){n(function(){document.querySelectorAll(e)[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.ui.focus("#account"),e.model.tempData.transactionDate=new Date,e.model.data.transactionDate=new Date,e.model.tempData.branch=e.model.data.branch},e.ui.addData=function(){var t=!0;e.model.tempData.accAccount||(t=!1,i.error("select a account to add !")),e.model.tempData.branch||(t=!1,i.error("select a branch to add !")),e.model.tempData.description||(t=!1,i.error("insert description to add !")),e.model.data.transactionDate||(t=!1,i.error("insert a Date to add !")),e.model.tempData.debit||(t=!1,i.error("insert amount to add !")),e.model.data.accAccount||(t=!1,i.error("select a main account to add !")),e.model.saveDataList.length>=1&&(t=!1,i.error("transfer account Limited to one")),a("date")(e.model.data.transactionDate,"yyyy-MM-dd")>a("date")(new Date,"yyyy-MM-dd")&&(t=!1,i.error("transfer date not valid ! ")),t&&(e.model.addData(),e.ui.new(),e.ui.focus("#subAccount"))},e.ui.save=function(){var t=!0;e.model.data.accAccount||(t=!1,i.error("select a main account to save !")),0===e.model.saveDataList.length&&(t=!1,i.error("empty transfer item to save !")),e.model.data.credit||(t=!1,i.error("total value 0.00 !")),e.model.data.description||(t=!1,i.error("insert description to save !")),a("date")(e.model.data.transactionDate,"yyyy-MM-dd")>a("date")(new Date,"yyyy-MM-dd")&&(t=!1,i.error("transfer date not valid ! ")),t&&o.primaryConfirm("DO YOU WANT TO SAVE THIS FUND TRANSFER !").confirm(function(){e.model.save().then(function(t){i.success("payment voucher save Sucess"),e.ui.mode="IDEAL",e.model.data={},e.model.saveDataList=[]})})},e.ui.edit=function(t,n){e.model.tempData=n,e.model.saveDataList.splice(t,1),e.model.totalCalculation()},e.ui.delete=function(t){e.model.saveDataList.splice(t,1),e.model.totalCalculation()},e.ui.selectAccType=function(t){e.model.selectAccType=t,e.model.type=t.value,e.ui.focus("#account"),e.model.setClear(),console.log(e.model.selectAccType)},e.ui.focusAdd=function(t){13===t.which&&e.ui.addData()},e.ui.init=function(){e.ui.mode="IDEAL"},e.ui.init()}])}(),function(){angular.module("appModule").factory("fundTransferFactory",function(){var e={};return e.Data=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:"fund_transfer",refNumber:null,type:"voucher",typeIndexNo:null,description:"",chequeDate:null,bankReconciliation:!1,reconcileAccount:null,reconcileGroup:0}},e.tempData=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:"fund_transfer",refNumber:null,type:"voucher",typeIndexNo:null,description:"",chequeDate:null,bankReconciliation:!1,reconcileAccount:null,reconcileGroup:0}},e})}(),function(){var e=function(e,t,n,a,i,o){function c(){this.constructor()}return c.prototype={data:{},tempData:{},currentBranch:{},selectAccType:{},accAccountList:[],branchList:[],saveDataList:[],accTypeList:[],constructor:function(){var n=this;n.data=e.Data(),n.tempData=e.tempData(),t.loadBranch().success(function(e){n.branchList=e}),t.currentBranch().success(function(e){n.currentBranch=e,n.data.branch=e.indexNo}),t.loadAccTypes().success(function(e){n.accTypeList=e}),this.loadAccAccount()},loadAccAccount:function(){var e=this;t.loadAccAccounts().success(function(t){e.accAccountList=t})},getValue:function(e){var n=this;t.loadAccBalance(e).success(function(e){n.data.value=e})},branchLable:function(e){var t;return angular.forEach(this.branchList,function(n){if(n.indexNo===e)return void(t=n.branchCode+" - "+n.name)}),t},accountLable:function(e){var t;return angular.forEach(this.accAccountList,function(n){if(n.indexNo===e)return void(t=n.accCode+" - "+n.name)}),t},addData:function(){var t=this;this.tempData.transactionDate=i("date")(this.data.transactionDate,"yyyy-MM-dd"),this.saveDataList.push(this.tempData),this.tempData=e.tempData(),a(function(){t.totalCalculation()},30)},totalCalculation:function(){var e=0;angular.forEach(this.saveDataList,function(t){console.log(t),e+=parseFloat(t.debit)}),this.data.credit=e},save:function(){var e=this,a={};a.dataList=this.saveDataList,this.data.transactionDate=i("date")(this.data.transactionDate,"yyyy-MM-dd"),this.data.chequeDate=i("date")(this.data.chequeDate,"yyyy-MM-dd"),a.data=this.data,console.log(a);var o=n.defer();return t.saveFundTransfer(JSON.stringify(a)).success(function(t){e.saveDataList=[],o.resolve(t)}).error(function(e){o.reject(e)}),o.promise},setClear:function(){this.tempData=e.tempData(),this.data=e.Data(),this.tempData.transactionDate=new Date,this.data.transactionDate=new Date,this.tempData.branch=this.currentBranch.indexNo,this.data.branch=this.currentBranch.indexNo,this.saveDataList=[]}},c};e.$inject=["fundTransferFactory","fundTransferService","$q","$timeout","$filter","Notification"],angular.module("appModule").factory("fundTransferModel",e)}(),function(){var e=function(e,t){this.loadAccAccounts=function(){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-only-cahs-bank")},this.currentBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch/current-branch")},this.loadBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch")},this.loadAccBalance=function(n){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-account-value/"+n)},this.loadAccTypes=function(){return e.get(t.apiUrl+"/api/care-point/master/account-type")},this.saveFundTransfer=function(n){return e.post(t.apiUrl+"/api/care-point/transaction/fund-transfer/save",n)}};e.$inject=["$http","systemConfig"],angular.module("appModule").service("fundTransferService",e)}(),function(){angular.module("appModule").controller("returnChequeController",["$scope","returnChequeModel","$timeout","$filter","Notification","ConfirmPane",function(e,t,n,a,i,o){e.model=new t,e.ui={},e.model.currentBranch={},e.model.type=null,e.ui.focus=function(e){n(function(){document.querySelectorAll(e)[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.model.data.transactionDate=new Date},e.ui.checkType=function(t){e.model.checkType(t)},e.ui.save=function(){o.primaryConfirm("DO YOU WANT TO SAVE CHEQUE RETURN !").confirm(function(){e.model.save().then(function(t){i.success("cheque return save Success !"),e.ui.mode="IDEAL"})})},e.ui.focusAdd=function(t){13===t.which&&e.ui.addData()},e.ui.init=function(){e.ui.mode="IDEAL"},e.ui.init()}])}(),function(){angular.module("appModule").factory("returnChequeFactory",function(){var e={};return e.Data=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:"cheque_return",refNumber:null,type:"cheque_return",typeIndexNo:null,description:null,chequeDate:null,bankReconciliation:!1,reconcileAccount:null,reconcileGroup:0}},e.tempData=function(){return{supplier:null,transactionNo:null,transactionDate:null,formName:null,user:null}},e})}(),function(){var e=function(e,t,n,a,i,o){function c(){this.constructor()}return c.prototype={data:{},tempData:{},currentBranch:{},accAccountList:[],typeAccAccountList:[],branchList:[],supplierList:[],accTypeList:[],userList:[],chequeDetailList:[],accType:null,selectedCheque:{},constructor:function(){var n=this;n.data=e.Data(),n.tempData=e.tempData(),t.loadBranch().success(function(e){n.branchList=e}),t.loadSupplier().success(function(e){n.supplierList=e}),t.currentBranch().success(function(e){n.currentBranch=e,n.data.branch=e.indexNo}),t.getUsers().success(function(e){n.userList=e}),this.loadAccAccount()},loadAccAccount:function(){var e=this;t.loadAccAccounts().success(function(t){e.accAccountList=t})},selectCheque:function(e){var t=this;t.selectedCheque=e,t.tempData.supplier="",angular.forEach(t.supplierList,function(n){if(n.indexNo===e.typeIndexNo)return void(t.tempData.supplier=n.indexNo+" - "+n.name)}),angular.forEach(t.userList,function(n){if(n.indexNo===e.user)return void(t.tempData.user=n.indexNo+" - "+n.username)}),t.tempData.transactionNo=e.number,t.tempData.transactionDate=e.transactionDate,t.tempData.formName=e.formName,this.getChequeDetails(e.deleteRefNo)},getChequeDetails:function(e){var n=this;t.getSelectedChequeDetails(e).success(function(e){n.chequeDetailList=e,console.log(e)})},checkType:function(e){var n=this
;n.data.accType=e,n.chequeList=[],t.getCheques(e).success(function(e){n.chequeList=e})},branchLable:function(e){var t;return angular.forEach(this.branchList,function(n){if(n.indexNo===e)return void(t=n.branchCode+" - "+n.name)}),t},supplierLable:function(e){var t;return angular.forEach(this.supplierList,function(n){if(n.indexNo===e)return void(t=n.indexNo+" - "+n.name)}),t},accountLable:function(e){var t;return angular.forEach(this.accAccountList,function(n){if(n.indexNo===e)return void(t=n.accCode+" - "+n.name)}),t},save:function(){var a=this,o={};o.dataList=this.chequeDetailList,this.data.transactionDate=i("date")(this.data.transactionDate,"yyyy-MM-dd"),o.data=this.data,console.log(o);var c=n.defer();return t.save(JSON.stringify(o)).success(function(t){a.chequeDetailList=[],a.chequeList=[],a.data=e.Data(),a.tempData=e.tempData(),c.resolve(t)}).error(function(e){c.reject(e)}),c.promise}},c};e.$inject=["returnChequeFactory","returnChequeService","$q","$timeout","$filter","Notification"],angular.module("appModule").factory("returnChequeModel",e)}(),function(){var e=function(e,t){this.loadAccAccounts=function(){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-only-account")},this.currentBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch/current-branch")},this.loadBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch")},this.loadAccBalance=function(n){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-account-value/"+n)},this.loadSupplier=function(){return e.get(t.apiUrl+"/api/care-point/master/supplier")},this.getCheques=function(n){return e.get(t.apiUrl+"/api/care-point/transaction/return-cheque/get-cheques/"+n)},this.getUsers=function(){return e.get(t.apiUrl+"/security/user-list")},this.getSelectedChequeDetails=function(n){return e.get(t.apiUrl+"/api/care-point/transaction/return-cheque/get-selected-cheque-details/"+n)},this.save=function(n){return e.post(t.apiUrl+"/api/care-point/transaction/return-cheque/save",n)}};e.$inject=["$http","systemConfig"],angular.module("appModule").service("returnChequeService",e)}(),function(){angular.module("appModule").controller("trialBalanceController",["$scope","trialBalanceModel","$timeout","Notification",function(e,t,n,a){e.model=new t,e.ui={},e.ui.focus=function(e){n(function(){document.querySelectorAll(e)[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.ui.focus("#date"),e.model.date=new Date},e.ui.selectDate=function(){console.log("data"),e.model.selectDate()},e.ui.init=function(){e.ui.mode="IDEAL"},e.ui.init()}])}(),function(){var e=function(e,t){function n(){this.constructor()}return n.prototype={accMainList:[],totalDebit:0,totalCredit:0,level:1,subAccountOf:0,constructor:function(){},selectDate:function(){var n=this;n.loderView=!0;var a=e("date")(n.date,"yyyy-MM-dd");t.loadMainAcc(a).success(function(e){n.accMainList=e,n.totalCalc()})},totalCalc:function(){var e=0,t=0,n=this;angular.forEach(n.accMainList,function(n){1===n.isAccAccount&&(e+=n.debit,t+=n.credit),n.view=!1,n.amountShow=!0,1===n.level&&(n.view=!0)}),n.totalCredit=t,n.totalDebit=e,n.loderView=!1},viewLevel:function(e){var t=this;t.level=parseInt(e.level)+1,e.count>0&&(e.amountShow=!0!==e.amountShow),t.filter1(e)},filter1:function(e){console.log("filter func");var t=this;angular.forEach(t.accMainList,function(n){var a=e.accCode;console.log(n.accCode.substring(0,a.length)),n.accCode.substring(0,a.length)===a&&t.level>=n.level&&n.subAccountOf===e.accNo&&(n.view=!0!==n.view)})}},n};e.$inject=["$filter","trialBalanceService"],angular.module("appModule").factory("trialBalanceModel",e)}(),function(){var e=function(e,t){this.loadMainAcc=function(n){return e.get(t.apiUrl+"/api/care-point/view/trial-balance/get-main-acc-balance/"+n)}};e.$inject=["$http","systemConfig"],angular.module("appModule").service("trialBalanceService",e)}(),function(){angular.module("appModule").controller("supplierPaymentController",["$scope","supplierPaymentModel","$timeout","$filter","Notification","ConfirmPane",function(e,t,n,a,i,o){e.model=new t,e.ui={},e.model.currentBranch={},e.model.type=null,e.ui.focus=function(e){n(function(){document.querySelectorAll(e)[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.ui.focus("#supplier"),e.model.typeCash=!0,e.model.typeOverPayment=!1,e.model.data.transactionDate=new Date},e.ui.checkType=function(t){e.ui.focus("#account"),e.model.checkType(t)},e.ui.save=function(){var t=!0;e.model.data.accAccount||(t=!1,i.error("select an account to save !")),e.model.data.credit||(t=!1,i.error("total value 0.00 !")),e.model.data.description||(t=!1,i.error("insert description to save !")),e.model.data.transactionDate||(t=!1,i.error("insert transaction date to save !")),e.model.data.credit<e.model.data.billTotal&&(t=!1,i.error("pay amount not enough to settle bills !")),"OVER_PAYMENT"===e.model.data.accType&&e.model.data.overPay>0&&(t=!1,i.error("can't save because there is an overpayment !")),e.model.data.credit>e.model.data.overAmount&&"OVER_PAYMENT"===e.model.data.accType&&(t=!1,i.error("overpayment value not enough to save !")),a("date")(e.model.data.transactionDate,"yyyy-MM-dd")>a("date")(new Date,"yyyy-MM-dd")&&(t=!1,i.error("transfer date not valid ! ")),t&&o.primaryConfirm("DO YOU WANT TO SAVE SUPPLIER PAYMENT !").confirm(function(){e.model.save().then(function(t){i.success("supplier payment save Success !"),e.ui.mode="IDEAL"})})},e.ui.focusAdd=function(t){13===t.which&&e.ui.addData()},e.ui.init=function(){e.ui.mode="IDEAL"},e.ui.init()}])}(),function(){angular.module("appModule").factory("supplierPaymentFactory",function(){var e={};return e.Data=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:"supplier_payment",refNumber:null,type:"supplier_payment",typeIndexNo:null,description:null,chequeDate:null,bankReconciliation:!1,reconcileAccount:null,reconcileGroup:0}},e})}(),function(){var e=function(e,t,n,a,i,o){function c(){this.constructor()}return c.prototype={data:{},currentBranch:{},accAccountList:[],typeAccAccountList:[],branchList:[],supplierList:[],accTypeList:[],accflowList:[],billList:[],accType:null,constructor:function(){var n=this;n.data=e.Data(),t.loadBranch().success(function(e){n.branchList=e}),t.loadSupplier().success(function(e){n.supplierList=e}),t.currentBranch().success(function(e){n.currentBranch=e,n.data.branch=e.indexNo}),this.loadAccAccount()},loadAccAccount:function(){var e=this;t.loadAccAccounts().success(function(t){e.accAccountList=t})},getValue:function(e){var n=this;t.loadAccBalance(e).success(function(e){n.data.value=e,console.log(n.data.value)})},getPayableBills:function(e){var n=this,a=null;angular.forEach(n.supplierList,function(t){if(e===parseInt(t.indexNo))return void(a=t.accAccount)}),null!==a?(this.getOverPaymentAmount(e),t.getPayableBills(a).success(function(e){n.billList=[],angular.forEach(e,function(e){e.pay=0,n.billList.push(e)})})):(n.billList=[],this.setPayTotalAndOverPayment(),o.error("this supplier not linked to account system yet !"))},getOverPaymentAmount:function(e){var n=this;t.getOverPaymentAmount(e).success(function(e){n.data.overAmount=e})},checkOverValueAvailable:function(){if("OVER_PAYMENT"===this.data.accType){this.data.overAmount-this.data.credit<0&&o.error("overpayment value not enough !")}},setBalanceAmountToPay:function(e){e.pay||(e.pay=e.credit-e.debit),this.setPayTotalAndOverPayment()},changePayAmount:function(){this.setPayTotalAndOverPayment()},setPayTotalAndOverPayment:function(){var e=this;e.data.billTotal=0,e.data.overPay=0,angular.forEach(e.billList,function(t){t.credit-t.debit<t.pay&&(o.error("Can't set over amount for this bill !"),t.pay=0),e.data.billTotal+=t.pay}),e.data.overPay=e.data.credit-e.data.billTotal>0?e.data.credit-e.data.billTotal:0,this.checkOverValueAvailable()},clearTypeChange:function(){var e=this;e.data.refNumber="",e.data.chequeDate=null,e.data.accAccount=null},checkType:function(e){var n=this;n.data.accType=e,this.clearTypeChange(),"CASH"===e&&(n.typeAccAccountList=[],angular.forEach(n.accAccountList,function(t){t.accType===e&&n.typeAccAccountList.push(t)})),"BANK"===e&&(n.typeAccAccountList=[],angular.forEach(n.accAccountList,function(t){t.accType===e&&n.typeAccAccountList.push(t)})),"ONLINE"===e&&(n.typeAccAccountList=[],angular.forEach(n.accAccountList,function(e){"BANK"===e.accType&&n.typeAccAccountList.push(e)})),"OVER_PAYMENT"===e&&(n.typeAccAccountList=[],t.getOverPaymentIssueAccount().success(function(e){e&&(n.typeAccAccountList.push(e),n.data.accAccount=e.indexNo)}),this.checkOverValueAvailable())},branchLable:function(e){var t;return angular.forEach(this.branchList,function(n){if(n.indexNo===e)return void(t=n.branchCode+" - "+n.name)}),t},supplierLable:function(e){var t;return angular.forEach(this.supplierList,function(n){if(n.indexNo===e)return void(t=n.indexNo+" - "+n.name)}),t},accountLable:function(e){var t;return angular.forEach(this.accAccountList,function(n){if(n.indexNo===e)return void(t=n.accCode+" - "+n.name)}),t},save:function(){var a=this,o={};o.dataList=this.billList,this.data.transactionDate=i("date")(this.data.transactionDate,"yyyy-MM-dd"),this.data.chequeDate=i("date")(this.data.chequeDate,"yyyy-MM-dd"),o.data=this.data,console.log(o);var c=n.defer();return t.saveSupplierPayment(JSON.stringify(o)).success(function(t){a.billList=[],a.data=e.Data(),c.resolve(t)}).error(function(e){c.reject(e)}),c.promise}},c};e.$inject=["supplierPaymentFactory","supplierPaymentService","$q","$timeout","$filter","Notification"],angular.module("appModule").factory("supplierPaymentModel",e)}(),function(){var e=function(e,t){this.loadAccAccounts=function(){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-only-account")},this.currentBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch/current-branch")},this.loadBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch")},this.loadAccBalance=function(n){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-account-value/"+n)},this.loadSupplier=function(){return e.get(t.apiUrl+"/api/care-point/master/supplier")},this.getOverPaymentIssueAccount=function(){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-over-payment-issue-account")},this.getPayableBills=function(n){return e.get(t.apiUrl+"/api/care-point/transaction/supplier-payment/get-payable-bills/"+n)},this.getOverPaymentAmount=function(n){return e.get(t.apiUrl+"/api/care-point/transaction/supplier-payment/get-over-payment-amount/"+n)},this.saveSupplierPayment=function(n){return e.post(t.apiUrl+"/api/care-point/transaction/supplier-payment/save",n)}};e.$inject=["$http","systemConfig"],angular.module("appModule").service("supplierPaymentService",e)}(),function(){angular.module("appModule").controller("voucherController",["$scope","voucherModel","$timeout","$uibModal","Notification","ConfirmPane",function(e,t,n,a,i,o){e.model=new t,e.ui={},e.model.currentBranch={},e.model.type=null,e.ui.focus=function(e){n(function(){document.querySelectorAll(e)[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.ui.focus("#account"),e.model.tempData.transactionDate=new Date,e.model.data.transactionDate=new Date,e.model.tempData.branch=e.model.data.branch},e.ui.addData=function(){var t=!0;e.model.tempData.accAccount||(t=!1,i.error("Select a Account to add !")),e.model.tempData.branch||(t=!1,i.error("Select a branch to add !")),e.model.data.transactionDate||(t=!1,i.error("insert a Date to add !")),e.model.tempData.debit||(t=!1,i.error("insert amount to add !")),e.model.data.accAccount||(t=!1,i.error("select a main account to add !")),t&&(e.model.addData(),e.ui.new(),e.ui.focus("#subAccount"))},e.ui.save=function(){var t=!0;e.model.data.accAccount||(t=!1,i.error("select a main account to save !")),0===e.model.saveDataList.length&&(t=!1,i.error("Empty voucher item to save !")),e.model.data.credit||(t=!1,i.error("total value 0.00 !")),"BANK"===e.model.selectAccType.name&&(e.model.data.refNumber||(t=!1,i.error("Cheque No is Empty !")),e.model.data.chequeDate||(t=!1,i.error("plz enter Cheque Date !")),e.model.data.description||(t=!1,i.error("Description is empty !"))),t&&e.model.save().then(function(t){i.success("Payment voucher save Sucess"),e.ui.mode="IDEAL",e.model.data={},e.model.saveDataList=[]})},e.ui.edit=function(t,n){e.model.tempData=n,e.model.saveDataList.splice(t,1),e.model.totalCalculation()},e.ui.delete=function(t){e.model.saveDataList.splice(t,1),e.model.totalCalculation()},e.ui.selectAccType=function(t){e.model.selectAccType=t,e.model.type=t.value,e.ui.focus("#account"),e.model.setClear(),console.log(e.model.selectAccType)},e.ui.focusAdd=function(t){13===t.which&&e.ui.addData()},e.ui.init=function(){e.ui.mode="IDEAL"},e.ui.init()}])}(),function(){angular.module("appModule").factory("voucherFactory",function(){var e={};return e.Data=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:"payment_voucher",refNumber:null,type:"voucher",typeIndexNo:null,description:"",chequeDate:null,bankReconciliation:!1,reconcileAccount:null,isMain:!1,isCheque:!1}},e.tempData=function(){return{indexNo:null,transactionDate:null,currentDate:null,time:null,branch:null,currentBranch:null,user:null,debit:0,credit:0,accAccount:null,formName:"payment_voucher",refNumber:null,type:"voucher",typeIndexNo:null,description:"",chequeDate:null,bankReconciliation:!1,reconcileAccount:null,isMain:!1,isCheque:!1}},e})}(),function(){var e=function(e,t,n,a,i,o){function c(){this.constructor()}return c.prototype={data:{},tempData:{},currentBranch:{},selectAccType:{},accAccountList:[],branchList:[],saveDataList:[],accTypeList:[],constructor:function(){var n=this;n.data=e.Data(),n.tempData=e.tempData(),t.loadBranch().success(function(e){n.branchList=e}),t.currentBranch().success(function(e){n.currentBranch=e,n.data.branch=e.indexNo}),t.loadAccTypes().success(function(e){n.accTypeList=e}),this.loadAccAccount()},loadAccAccount:function(){var e=this;t.loadAccAccounts().success(function(t){e.accAccountList=t})},getValue:function(e){var n=this;t.loadAccBalance(e).success(function(e){n.data.value=e})},branchLable:function(e){var t;return angular.forEach(this.branchList,function(n){if(n.indexNo===e)return void(t=n.branchCode+" - "+n.name)}),t},accountLable:function(e){var t;return angular.forEach(this.accAccountList,function(n){if(n.indexNo===e)return void(t=n.accCode+" - "+n.name)}),t},addData:function(){var t=this;this.tempData.transactionDate=i("date")(this.data.transactionDate,"yyyy-MM-dd"),this.saveDataList.push(this.tempData),this.tempData=e.tempData(),a(function(){t.totalCalculation()},30)},totalCalculation:function(){var e=0;angular.forEach(this.saveDataList,function(t){console.log(t),e+=parseFloat(t.debit)}),this.data.credit=e},save:function(){var e={};e.voucherList=this.saveDataList,this.data.transactionDate=i("date")(this.data.transactionDate,"yyyy-MM-dd"),this.data.chequeDate=i("date")(this.data.chequeDate,"yyyy-MM-dd"),e.voucher=this.data,"BANK"===this.selectAccType.name&&(e.voucher.bankReconciliation=!0),console.log(e);var a=n.defer();return t.saveVoucher(JSON.stringify(e)).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},setClear:function(){this.tempData=e.tempData(),this.data=e.Data(),this.tempData.transactionDate=new Date,this.data.transactionDate=new Date,this.tempData.branch=this.currentBranch.indexNo,this.data.branch=this.currentBranch.indexNo,this.saveDataList=[]}},c};e.$inject=["voucherFactory","voucherService","$q","$timeout","$filter","Notification"],angular.module("appModule").factory("voucherModel",e)}(),function(){var e=function(e,t){this.loadAccAccounts=function(){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-only-account")},this.currentBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch/current-branch")},this.loadBranch=function(){return e.get(t.apiUrl+"/api/care-point/master/branch")},this.loadAccBalance=function(n){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account/find-account-value/"+n)},this.loadAccTypes=function(){return e.get(t.apiUrl+"/api/care-point/master/account-type")},this.saveVoucher=function(n){return e.post(t.apiUrl+"/api/care-point/transaction/voucher/save",n)},this.delete=function(n){return e.delete(t.apiUrl+"/api/care-point/account/master/acc-account/delete-account/"+n)}};e.$inject=["$http","systemConfig"],angular.module("appModule").service("voucherService",e)}(),function(){angular.module("clientModule",["ui.bootstrap","ui-notification"]),angular.module("clientModule").factory("clientFactory",["$http","systemConfig",function(e,t){var n={};return n.lordClientFactory=function(n){var a=t.apiUrl+"/api/care-point/master/client";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,a){n(e)})},n.getNewClientList=function(n){var a=t.apiUrl+"/api/care-point/master/client/get-new-client-list";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,a){n(e)})},n.getCustomerTypes=function(n){var a=t.apiUrl+"/api/care-point/service/zmaster/customer-type";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,a){n(e)})},n.saveClientFactory=function(n,a,i){var o=t.apiUrl+"/api/care-point/master/client/insert-client";e.post(o,n).success(function(e,t,n){a(e)}).error(function(e,t,n){i&&i(e)})},n.deleteClientFactory=function(n,a,i){var o=t.apiUrl+"/api/care-point/master/client/delete-client/"+n;e.delete(o).success(function(e,t,n){a(e)}).error(function(e,t,n){i&&i(e)})},n}]),angular.module("clientModule").controller("clientController",["$scope","$filter","$log","$routeParams","clientFactory","Notification","$timeout",function(e,t,n,a,i,o,c){e.model={},e.model.newClientList=[],e.ui={},e.http={},e.ui.mode=null,e.model.reset=function(){e.model.client={indexNo:null,name:null,address1:null,address2:null,address3:null,mobile:null,branch:null,type:null,nic:null,resident:null,date:null,isNew:!1}},e.validateInput=function(){return!!(e.model.client.name|e.model.client.mobile|null!==e.model.client.type)},e.http.saveClient=function(){e.model.client.branch=1,e.model.client.date||(e.model.client.date=t("date")(new Date,"yyyy-MM-dd")),e.model.client.isNew=!1;var n=e.model.client,a=JSON.stringify(n);console.log(a),i.saveClientFactory(a,function(t){e.model.clientList.push(t),o.success(t.indexNo+" - Client Save Successfully"),e.model.reset()},function(e){o.error(e.message)})},e.http.deleteClient=function(t,n){i.deleteClientFactory(t,function(){e.model.clientList.splice(n,1),o.success(t+" - Client Delete Successfully")},function(e){o.error(e)})},e.ui.save=function(){e.validateInput()?e.http.saveClient():o.error("Please input detail")},e.ui.editNewClient=function(t,n){e.ui.mode="EDIT",e.model.client=t,e.model.newClientList.splice(n,1)},e.ui.customerTypeLable=function(t){var n="";return angular.forEach(e.model.customerTypeList,function(e){if(e.indexNo===t)return void(n=e.indexNo+" - "+e.name)}),n},e.ui.changeTab=function(){e.ui.mode="IDEAL",e.model.client={}},e.ui.focus=function(){c(function(){document.querySelectorAll("#nicText")[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.ui.focus()},e.ui.edit=function(t,n){e.ui.mode="EDIT",e.model.client=t,e.model.clientList.splice(n,1),e.ui.focus()},e.model.findCustomer=function(t){for(var n=0;n<e.model.clientList.length;n++)if(console.log(t+" : "+e.model.clientList[n].indexNo),e.model.clientList[n].indexNo===parseInt(t))return e.model.clientList[n];e.ui.mode="EDIT"},e.ui.init=function(){e.ui.mode="IDEAL",e.model.reset(),i.lordClientFactory(function(t){e.model.clientList=t}),i.getCustomerTypes(function(t){e.model.customerTypeList=t}),i.getNewClientList(function(t){e.model.newClientList=t});var t=parseInt(a.client);t&&(console.log(t),c(function(){e.model.client=e.model.findCustomer(t),console.log(e.model.client)},2e3))},e.ui.init()}])}(),function(){angular.module("appModule").controller("createAccountController",["$scope","createAccountModel","$timeout","Notification","ConfirmPane",function(e,t,n,a,i){e.model=new t,e.ui={},e.ui.focus=function(){n(function(){document.querySelectorAll("#categoryMain")[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.ui.focus()},e.ui.edit=function(t,n){e.model.edit(t),e.model.accAccountList.splice(n,1),e.model.data.clearAll=!0,e.ui.mode="EDIT"},e.ui.delete=function(t){t.isAccAccount?i.warningConfirm("DO YOU WANT TO DELECT !").confirm(function(){e.model.delete(t.indexNo).then(function(e){a.success("Delete success !")})}):a.error("Can't delete because there are another transaction with relation  !")},e.ui.save=function(){var t=!0;e.model.data.name||(t=!1,a.error("Insert a name to save !")),e.model.data.accType||(t=!1,a.error("Select Account Type to save !")),e.model.data.subAccountOf||(t=!1,a.error("Select subAccountOf to save !")),t&&(e.ui.mode="IDEAL",e.model.save().then(function(t){a.success("New Account save Sucess"),e.model.data.clearAll&&e.model.clearData()}))},e.ui.init=function(){e.ui.mode="IDEAL"},e.ui.init()}])}(),function(){angular.module("appModule").factory("createAccountFactory",function(){var e={};return e.Data=function(){return{indexNo:null,name:"",level:null,accCode:null,cop:!1,user:null,accType:"COMMON",isAccAccount:!0,description:null,subAccountOf:null,accMain:null}},e})}(),function(){var e=function(e,t,n,a,i){function o(){this.constructor()}return o.prototype={data:{},accAccountList:[],accTypeList:["COMMON","CASH","BANK"],constructor:function(){this.data=e.Data(),this.loadAccAccount()},loadAccAccount:function(){var e=this;t.loadAccAccounts().success(function(t){e.accAccountList=t})},clearData:function(){this.data=e.Data()},edit:function(e){this.clearData(),this.data=e},delete:function(e){var a=this,o=n.defer();return t.delete(e).success(function(e){a.clearData(),a.loadAccAccount(),o.resolve(e)}).error(function(e){i.error(e),o.reject(e)}),o.promise},accAccountLabel:function(e){var t;return angular.forEach(this.accAccountList,function(n){if(n.indexNo===e)return void(t=n.accCode+" - "+n.name)}),t},save:function(){var e=this;console.log(this.data);var a=n.defer();return t.saveNewAccount(JSON.stringify(e.data)).success(function(t){e.loadAccAccount(),a.resolve()}).error(function(){a.reject()}),a.promise}},o};e.$inject=["createAccountFactory","createAccountService","$q","$filter","Notification"],angular.module("appModule").factory("createAccountModel",e)}(),function(){var e=function(e,t){this.loadAccAccounts=function(){return e.get(t.apiUrl+"/api/care-point/account/master/acc-account")},this.saveNewAccount=function(n){return e.post(t.apiUrl+"/api/care-point/account/master/acc-account/save-new-account",n)},this.delete=function(n){return e.delete(t.apiUrl+"/api/care-point/account/master/acc-account/delete-account/"+n)}};e.$inject=["$http","systemConfig"],angular.module("appModule").service("createAccountService",e)}(),function(){angular.module("appModule").controller("employeeController",["$scope","employeeModel","systemConfig","$timeout","Notification",function(e,t,n,a,i){e.model=new t,e.ui={},e.imagemodel=[],e.imagemodelX=[],e.ui.imageShowMode1="NotAvalable",e.ui.changeFunction=function(t){"NotAvalable"===e.ui.imageShowMode1&&(e.ui.imageShowMode1="Avalable");for(var n=t.target.files,a=0;a<n.length;a++){var i=n[a];e.imagemodel.push(i);var o=new FileReader;o.onload=e.imageIsLoaded,o.readAsDataURL(i)}},e.imageIsLoaded=function(t){e.$apply(function(){e.imagemodelX.push(t.target.result)})},e.ui.showImg=function(){e.imageModel&&e.ui.showImg},e.ui.saveImage=function(t,a){for(var i=0;i<e.imagemodel.length;i++){var o=n.apiUrl+"/api/care-point/master/employee/upload-image/"+a+"/"+t,c=new FormData;c.append("file",e.imagemodel[i]);var r=new XMLHttpRequest;r.open("POST",o),r.send(c)}},e.ui.clearImage=function(){e.imagemodel=[],e.imagemodelX=[],e.imagemodels={},e.ui.imageShowMode1="NotAvalable"},e.ui.downloardImage=function(t){e.imagemodelX[0]=n.apiUrl+"/api/care-point/master/employee/download-image/"+t.image,e.ui.imageShowMode1="Avalable"},e.ui.save=function(){e.model.saveEmployee().then(function(t){e.ui.saveImage(t.indexNo,t.name),e.model.employeeData={},e.imagemodel=[],e.imagemodelX=[],e.ui.imageShowMode1="NotAvalable",i.success("Save Success...!!")},function(){})},e.ui.deleteEmployee=function(t,n){e.model.deleteEmployee(t,n).then(function(e){i.success("Delete Success...!!")},function(e){i.error(e)})},e.ui.edit=function(t,n){e.model.employeeData=t,e.ui.downloardImage(t),e.model.editEmployee(n)},e.ui.focus=function(){a(function(){document.querySelectorAll("#name")[0].focus()},10)},e.ui.new=function(){e.ui.mode="NEW",e.ui.focus()},e.ui.init=function(){e.ui.mode="IDEAL"},e.ui.init()}])}(),function(){angular.module("appModule").factory("employeeFactory",function(){var e={};return e.newEmployeeData=function(){return{indexNo:null,name:null,addressLine1:null,addressLine2:null,addressLine3:null,mobile:null,branch:null,type:null,rol:null,image:null,bay:null}},e})}(),function(){var e=function(e,t,n,a){function i(){this.constructor()}return i.prototype={employeeData:{},employeeList:[],constructor:function(){var n=this;n.employeeData=e.newEmployeeData(),t.loadEmolyee().success(function(e){n.employeeList=e,console.log(e)})},saveEmployee:function(){var e=this,a=n.defer();return t.saveEmployee(JSON.stringify(e.employeeData)).success(function(t){e.employeeList.push(t),a.resolve(t)}).error(function(){a.reject()}),a.promise},editEmployee:function(e){this.employeeList.splice(e,1)},deleteEmployee:function(e,a){var i=this,o=n.defer();return t.deleteEmployee(e).success(function(e){i.employeeList.splice(a,1),o.resolve(e)}).error(function(e){o.reject(e)}),o.promise}},i};e.$inject=["employeeFactory","employeeService","$q","$filter"],angular.module("appModule").factory("employeeModel",e)}(),function(){var e=function(e,t){this.loadEmolyee=function(){return e.get(t.apiUrl+"/api/care-point/master/employee")},this.saveEmployee=function(n){return e.post(t.apiUrl+"/api/care-point/master/employee/save-employee",n)},this.deleteEmployee=function(n){return e.delete(t.apiUrl+"/api/care-point/master/employee/delete-employee/"+n)}};e.$inject=["$http","systemConfig"],angular.module("appModule").service("employeeService",e)}(),function(){angular.module("vehicleModule",["ui.bootstrap","ui-notification"]),angular.module("vehicleModule").factory("vehicleFactory",["$http","systemConfig",function(e,t){var n={};return n.findByVehicleNumber=function(n,a){var i=t.apiUrl+"/api/care-point/master/vehicle/find-by-vehicle-no/"+n;e.get(i).success(function(e,t,n){a(e)}).error(function(e,t,n){})},n.loadVehicle=function(n){var a=t.apiUrl+"/api/care-point/master/vehicle";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,n){})},n.lordClient=function(n){var a=t.apiUrl+"/api/care-point/master/client";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,n){})},n.getBrandList=function(n){var a=t.apiUrl+"/api/care-point/service/zmaster/vehicle/get-brand-list";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,n){})},n.getModelList=function(n){var a=t.apiUrl+"/api/care-point/service/zmaster/vehicle/get-model-list";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,n){})},n.getFuelTypeList=function(n){var a=t.apiUrl+"/api/care-point/service/zmaster/vehicle/get-fuel-type-list";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,n){})},n.getNewVehicleList=function(n){var a=t.apiUrl+"/api/care-point/service/zmaster/vehicle/get-new-vehicles";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,n){})},n.lordVehicleType=function(n){var a=t.apiUrl+"/api/care-point/master/vehicle-type";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,n){})},n.lordPriceCategory=function(n){var a=t.apiUrl+"/api/care-point/master/priceCategory";e.get(a).success(function(e,t,a){n(e)}).error(function(e,t,a){n(e)})},n.insertVehicle=function(n,a,i){var o=t.apiUrl+"/api/care-point/master/vehicle/insert-detail";e.post(o,n).success(function(e,t,n){a(e)}).error(function(e,t,n){i(e)})},n.deleteVehicle=function(n,a,i){var o=t.apiUrl+"/api/care-point/master/vehicle/delete-detail/"+n;e.delete(o).success(function(e,t,n){a(e)}).error(function(e,t,n){i(e)})},n}]),angular.module("vehicleModule").controller("vehicleController",["$scope","$filter","$log","$timeout","$routeParams","vehicleFactory","Notification",function(e,t,n,a,i,o,c){e.model={},e.ui={},e.http={},e.ui.mode=null,e.model.vehicle={},e.model.vehicleList=[],e.model.brandList=[],e.model.modelList=[],e.model.fuelTypeListList=[],e.model.newVehicleList=[],e.model.searchKeyword=null,e.model.showSuggestions=!1,e.model.searchSuggestions=[],e.model.reset=function(){e.model.vehicle={}},e.ui.focus=function(){a(function(){document.querySelectorAll("#clientText")[0].focus()},10)},e.validateInput=function(){return!!(e.model.vehicle.client&&e.model.vehicle.vehicleNo&&e.model.vehicle.vehicleType&&e.model.vehicle.priceCategory&&e.model.vehicle.type&&e.model.vehicle.brand&&e.model.vehicle.fuelType&&e.model.vehicle.lastMilage&&e.model.vehicle.model)},e.http.deleteVehicle=function(t,n){o.deleteVehicle(t,function(){e.model.vehicleList.splice(n,1),c.success("delete success")},function(e){c.error(e.message)})},e.http.saveVehicle=function(){e.model.vehicle.isNew=!1,angular.isUndefined(e.model.vehicle.date)&&(e.model.vehicle.date=t("date")(new Date,"yyyy-MM-dd"));var n=e.model.vehicle,a=JSON.stringify(n);o.insertVehicle(a,function(t){e.model.vehicleList.push(t),c.success("Successfully Added"),e.model.reset(),e.ui.mode="IDEAL"},function(e){c.error(e.message)})},e.ui.save=function(){e.validateInput()?e.http.saveVehicle():c.error("Please Input Details")},e.clientData=function(t){var n="";return angular.forEach(e.model.clientList,function(e){if(console.log(t),console.log(e.indexNo+" - "+e.name),e.indexNo===parseInt(t))return void(n=e)}),n},e.clientLable=function(t){var n;return angular.forEach(e.model.clientList,function(e){if(e.indexNo===t)return void(n=e.indexNo+" - "+e.name)}),n},e.vehicleTypeLabel=function(t){var n;return angular.forEach(e.model.vehicleTypeList,function(e){if(e.indexNo===t)return void(n=e.indexNo+" - "+e.model)}),n},e.priceCategoryLabel=function(t){var n;return angular.forEach(e.model.priceCategoryList,function(e){if(e.indexNo===t)return void(n=e.name)}),n},e.ui.new=function(){e.ui.mode="NEW",e.model.reset(),e.ui.focus()},e.ui.edit=function(t,n){e.ui.mode="EDIT",e.model.vehicle=t,e.model.vehicleList.splice(n,1)},e.ui.editNewVehicle=function(t,n){e.ui.mode="EDIT",e.model.vehicle=t,e.model.newVehicleList.splice(n,1)},e.model.loadAllVehicles=function(){o.loadVehicle(function(t){e.model.vehicleList=t},function(e){c.error(e.message)})},e.model.findByVehicleNumber=function(){o.findByVehicleNumber(e.model.searchKeyword,function(t){e.model.searchSuggestions=t},function(){e.mode.searchSuggestions=[]})},e.ui.setVehicleData=function(t){e.model.vehicle=t,e.ui.mode="EDIT",e.model.searchKeyword=null},e.model.findVehicle=function(t){e.ui.mode="NEW";for(var n=0;n<e.model.newVehicleList.length;n++)if(e.model.newVehicleList[n].indexNo===parseInt(t))return e.model.newVehicleList[n]},e.ui.init=function(){e.ui.mode="IDEAL",e.model.reset(),o.getNewVehicleList(function(t){e.model.newVehicleList=t}),o.loadVehicle(function(t){e.model.vehicleList=t}),o.lordClient(function(t){e.model.clientList=t}),o.lordVehicleType(function(t){e.model.vehicleTypeList=t}),o.lordPriceCategory(function(t){e.model.priceCategoryList=t}),o.getBrandList(function(t){e.model.brandList=t}),o.getModelList(function(t){e.model.modelList=t}),o.getFuelTypeList(function(t){e.model.fuelTypeList=t}),e.$watch("model.searchKeyword",function(t,n){e.model.showSuggestions=t&&t.length,t&&t.length>=2&&e.model.findByVehicleNumber()}),e.$watch("model.vehicle",function(t){t&&(e.model.showSuggestions=!e.model.vehicle)});var t=parseInt(i.vehicle);t&&(a(function(){e.model.vehicle=e.model.findVehicle(t)},2e3),console.log(t))},
e.ui.init()}])}(),function(){"use strict";function e(e){function t(t){t<1||t>n.pager.totalPages||(n.pager=e.GetPager(n.dummyItems.length,t),n.items=n.dummyItems.slice(n.pager.startIndex,n.pager.endIndex+1))}var n=this;n.dummyItems=_.range(1,151),n.pager={},n.setPage=t,function(){n.setPage(1)}()}function t(){function e(e,t,n){t=t||1,n=n||10;var a,i,o=Math.ceil(e/n);o<=10?(a=1,i=o):t<=6?(a=1,i=10):t+4>=o?(a=o-9,i=o):(a=t-5,i=t+4);var c=(t-1)*n;return{totalItems:e,currentPage:t,pageSize:n,totalPages:o,startPage:a,endPage:i,startIndex:c,endIndex:Math.min(c+n-1,e-1),pages:_.range(a,i+1)}}var t={};return t.GetPager=e,t}e.$inject=["PagerService"],angular.module("app",[]).factory("PagerService",t).controller("ExampleController",e)}(),function(){angular.module("appModule").controller("ReportViewerController",["$scope","$filter","$sce","reportViewerModel","ReportViewerService",function(e,t,n,a,i){e.model={},e.newModel=new a,e.model.currentReportGroup={},e.model.currentReport={},e.model.currentReport.parameterValues={},e.ui={},e.report="#",e.model.currentReport.parameterValues.FROM_DATE=t("date")(new Date,"dd-MM-yyyy"),e.model.currentReport.parameterValues.TO_DATE=t("date")(new Date,"dd-MM-yyyy"),e.ui.selectReportGroup=function(t){e.model.currentReportGroup=t},e.ui.selectReport=function(t){e.model.currentReport.report=t,i.listParameters(t).success(function(t){e.model.currentReport.parameters=t}),e.activeTabIndex=1,e.ui.status="PENDING"},e.ui.viewCurrentReport=function(){e.model.currentReport.report&&(e.ui.status="LOADING",i.viewReport(e.model.currentReport.report,e.model.currentReport.parameters,e.model.currentReport.parameterValues).success(function(t){e.ui.status="LOADED";var a=new Blob([t],{type:"application/pdf"}),i=URL.createObjectURL(a);e.content=n.trustAsResourceUrl(i)}))},e.ui.isParameterAvailable=function(t){return void 0!==e.model.currentReport.parameters&&e.model.currentReport.parameters.indexOf(t)>=0},e.init=function(){i.listReports().success(function(t){e.model.reports=t}),e.ui.status="PENDING"},e.init()}])}(),function(){angular.module("appModule").factory("reportViewerModel",["ReportViewerService",function(e){function t(){this.constructor()}return t.prototype={bayList:[],vehicleList:[],vehicleCategoryList:[],clientList:[],supplierList:[],branchList:[],itemTypeList:[],itemCateoryList:[],employeeList:[],categoryList:[],itemList:[],constructor:function(){var t=this;e.getBayList().success(function(e){t.bayList=e}),e.getVehicleList().success(function(e){t.vehicleList=e}),e.getVehicleCategoryList().success(function(e){t.vehicleCategoryList=e}),e.getClientList().success(function(e){t.clientList=e}),e.getSupplierList().success(function(e){t.supplierList=e}),e.getBranchList().success(function(e){t.branchList=e}),e.getItemCateoryList().success(function(e){t.itemCateoryList=e}),e.getEmployeeList().success(function(e){t.employeeList=e}),e.getCategoryList().success(function(e){t.categoryList=e}),e.getItemList().success(function(e){t.itemList=e}),this.itemTypeList=[{indexNo:1,name:"STOCK"},{indexNo:2,name:"NON STOCK"}]},bayLable:function(e){var t="";return angular.forEach(this.bayList,function(n){if(n.indexNo===parseInt(e))return void(t=n.indexNo+" - "+n.name)}),t},vehicleLable:function(e){var t="";return angular.forEach(this.vehicleList,function(n){if(n.indexNo===parseInt(e))return void(t=n.indexNo+" - "+n.vehicleNo)}),t},vehicleCategoryLable:function(e){var t="";return angular.forEach(this.vehicleCategoryList,function(n){if(n.indexNo===parseInt(e))return void(t=n.indexNo+" - "+n.name)}),t},categoryLable:function(e){var t="";return angular.forEach(this.categoryList,function(n){if(n.indexNo===parseInt(e))return void(t=n.indexNo+" - "+n.name)}),t},itemLable:function(e){var t="";return angular.forEach(this.itemList,function(n){if(n.indexNo===parseInt(e))return void(t=n.indexNo+" - "+n.name)}),t},clientLable:function(e){var t="";return angular.forEach(this.clientList,function(n){if(n.indexNo===parseInt(e))return void(t=n.indexNo+" - "+n.name)}),t},supplierLable:function(e){var t="";return angular.forEach(this.supplierList,function(n){if(n.indexNo===parseInt(e))return void(t=n.indexNo+" - "+n.name)}),t},branchLable:function(e){var t="";return angular.forEach(this.branchList,function(n){if(n.indexNo===parseInt(e))return void(t=n.branchCode+" - "+n.name)}),t},itemTypeLable:function(e){var t="";return angular.forEach(this.itemTypeList,function(n){if(n.name===e)return void(t=n.indexNo+" - "+n.name)}),t},itemCateoryLable:function(e){var t="";return angular.forEach(this.itemCateoryList,function(n){if(n.indexNo===parseInt(e))return void(t=n.indexNo+" - "+n.name)}),t},employeeLable:function(e){var t="";return angular.forEach(this.employeeList,function(n){if(n.indexNo===parseInt(e))return void(t=n.indexNo+" - "+n.name)}),t}},t}])}(),function(){angular.module("appModule").service("ReportViewerService",["$http","systemConfig",function(e,t){this.listReports=function(){return e.get(t.apiUrl+"/api/v1/report/report-viewer/list")},this.listParameters=function(n){return e.post(t.apiUrl+"/api/v1/report/report-viewer/report-parameters",JSON.stringify(n))},this.getReportUrl=function(e,n,a){var i=t.apiUrl+"/api/v1/report/report-viewer/report",o=btoa(e.fileName);return i=i+"?action="+o,angular.forEach(a,function(e,t){i=i+"&"+t+"="+e}),i},this.viewReport=function(t,n,a){return e.get(this.getReportUrl(t,n,a),{responseType:"arraybuffer"})},this.getPdfBytes=function(n){console.log(n);var a={client:"K W Chaminda"};return e.post(t.apiUrl+"/api/v1/report/report-viewer/report",JSON.stringify(a),{responseType:"arraybuffer"})},this.getBayList=function(){return e.get(t.apiUrl+"/api/care-point/master/bay/get-bays-by-branch-is-view")},this.getVehicleList=function(){return e.get(t.apiUrl+"/api/care-point/master/vehicle")},this.getVehicleCategoryList=function(){return e.get(t.apiUrl+"/api/care-point/master/priceCategory")},this.getClientList=function(){return e.get(t.apiUrl+"/api/care-point/master/client")},this.getSupplierList=function(){return e.get(t.apiUrl+"/api/care-point/master/supplier")},this.getBranchList=function(){return e.get(t.apiUrl+"/api/care-point/master/branch")},this.getItemCateoryList=function(){return e.get(t.apiUrl+"/api/care-point/master/item-category")},this.getCategoryList=function(){return e.get(t.apiUrl+"/api/care-point/master/category")},this.getItemList=function(){return e.get(t.apiUrl+"/api/care-point/master/item")},this.getEmployeeList=function(){return e.get(t.apiUrl+"/api/care-point/master/employee")}}])}(),function(){angular.module("vehicleEntranceModule",["ui.bootstrap","ui-notification"]),angular.module("vehicleEntranceModule").controller("vehicleEntranceController",["$scope","vehicleEntranceModel",function(e,t){e.model=new t}])}(),function(){angular.module("appModule").factory("vehicleEntranceFactory",function(){var e={};return e.newData=function(){return{indexNo:null,vehicleNo:null,year:null,engineNo:null,chasisNo:null,insuranceExpiryDate:null,revenueExpiryDate:null,lastMilage:null,nextMilage:null,colour:null,client:null,vehicleType:null,priceCategory:null,type:null,model:null,brand:null,fuelType:null}},e})}(),function(){var e=function(e,t,n,a){function i(){this.constructor()}return i.prototype={data:{},constructor:function(){this.data=t.newData()}},i};e.$inject=["vehicleEntranceService","vehicleEntranceFactory","$q","$filter"],angular.module("appModule").factory("vehicleEntranceModel",e)}(),function(){var e=function(e,t){};e.$inject=["$http","systemConfig"],angular.module("appModule").service("vehicleEntranceService",e)}(),function(){angular.module("appModule").controller("appController",["$scope","$cookies","$rootScope","$filter","$location","SecurityService",function(e,t,n,a,i,o){e.hamburgerOpen=!0,n.$watch("layout.loading",function(){e.routeLoading=n.layout.loading}),e.userRoles=n.userRoles,e.homepageUrls=[],e.currentPageName="",e.loginUser="",e.currentBranch="",e.loginUser=t.get("nick-name"),e.currentBranch=t.get("branch-name"),e.date=a("date")(new Date,"yyyy-MM-dd"),angular.forEach(e.userRoles,function(t){t.homepageUrl&&e.homepageUrls.push({name:t.name,url:t.homepageUrl})}),e.toggleHamburger=function(t){e.hamburgerOpen=!e.hamburgerOpen,e.currentPageName=t,e.hamburgerOpen?$timeout(function(){angular.element(document.querySelector(".side-bar-left")).css("display","none")},600):angular.element(document.querySelector(".side-bar-left")).css("display","flex")},e.isHomepage=function(){return e.loginUser=t.get("nick-name"),e.currentBranch=t.get("branch-name"),"/"===i.path()},e.logout=function(){o.logout().success(function(){i.path("/login")})}}])}(),function(){angular.module("appModule").controller("LoginController",["$scope","$cookies","$location","$timeout","SecurityService",function(e,t,n,a,i){e.ui={},e.model={},e.ui.focus=null,e.model.data={username:null,password:null},e.ui.onFocus=function(t){e.ui.focus=t},e.ui.onBlur=function(){e.ui.focus=null},e.ui.login=function(o){13===(o?o.keyCode||o.which:13)&&e.model.data.username&&e.model.data.password&&i.login(e.model.data).success(function(e,a,i){n.path("/"),t.put("nick-name",e.principal.nickName),t.put("branch-index-no",e.principal.branch),t.put("branch-name",e.principal.branchName)}).error(function(e,t){var n=angular.element(document.querySelectorAll(".login-form")[0]);n.addClass("login-failed"),a(function(){n.removeClass("login-failed")},1e3)})}}])}(),function(){angular.module("appModule").service("ConfirmPane",["$uibModal","$q",function(e,t){var n,a=function(e,t,a){function i(n,i){switch(this.modalInstance=n,this.timeout=i,this.message=t,this.title=a,e){case"primary":this.optionPaneClass="option-pane-primary",this.optionPaneIcon="glyphicon glyphicon-tag",this.title=void 0===this.title?"Confirm":this.title;break;case"info":this.optionPaneClass="option-pane-info",this.optionPaneIcon="glyphicon-bell",this.title=void 0===this.title?"Information":this.title;break;case"success":this.optionPaneClass="option-pane-success",this.optionPaneIcon="glyphicon-ok",this.title=void 0===this.title?"Success":this.title;break;case"warning":this.optionPaneClass="option-pane-warning",this.optionPaneIcon="glyphicon-warning-sign",this.title=void 0===this.title?"Warning":this.title;break;case"danger":this.optionPaneClass="option-pane-danger",this.optionPaneIcon="glyphicon-remove",this.title=void 0===this.title?"Danger":this.title;break;default:this.optionPaneClass="option-pane-default",this.optionPaneIcon="glyphicon-bell",this.title=void 0===this.title?"Note":this.title}}return i.prototype={confirm:function(){var e=this;this.timeout(function(){e.modalInstance.close(),n.resolve()},250)},discard:function(){var e=this;this.timeout(function(){e.modalInstance.close(),n.reject()},250)}},["$uibModalInstance","$timeout",i]};this.confirm=function(i,o,c){return n=t.defer(),e.open({animation:!0,backdrop:"static",ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"./app/util/dialog/confirm-pane.html",controller:a(i,o,c),controllerAs:"$ctrl",size:"md"}),{confirm:function(e){return n.promise.then(e,null),this},discard:function(e){return n.promise.then(null,e),this}}},this.primaryConfirm=function(e,t){return this.confirm("primary",e,t)},this.infoConfirm=function(e,t){return this.confirm("info",e,t)},this.successConfirm=function(e,t){return this.confirm("success",e,t)},this.warningConfirm=function(e,t){return this.confirm("warning",e,t)},this.dangerConfirm=function(e,t){return this.confirm("danger",e,t)},this.defaultConfirm=function(e,t){return this.confirm("default",e,t)}}])}(),function(){angular.module("appModule").service("InputPane",["$uibModal","$q","Notification",function(e,t,n){var a,i=function(e,t){function i(n,a){switch(this.modalInstance=n,this.timeout=a,this.type=e,this.title=t,e){case"primary":this.optionPaneClass="option-pane-primary",this.optionPaneIcon="glyphicon glyphicon-tag",this.title=void 0===this.title?"Confirm":this.title;break;default:this.optionPaneClass="option-pane-default",this.optionPaneIcon="glyphicon-bell",this.title=void 0===this.title?"Note":this.title}}return i.prototype={confirm:function(e){var t=this;this.timeout(function(){angular.isUndefined(e)?n.error("please input text"):(t.modalInstance.close(),a.resolve(e))},250)},discard:function(){var e=this;this.timeout(function(){e.modalInstance.close(),a.reject()},250)}},["$uibModalInstance","$timeout",i]};this.confirm=function(n,o){return a=t.defer(),e.open({animation:!0,backdrop:"static",ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"./app/util/dialog/input-option-pane.html",controller:i(n,o),controllerAs:"$ctrl",size:"md"}),{confirm:function(e){return a.promise.then(e,null),this},discard:function(e){return a.promise.then(null,e),this}}},this.primaryInput=function(e){return this.confirm("primary",e)},this.defaultInput=function(e){return this.confirm("default",e)}}])}(),function(){angular.module("appModule").service("optionPane",["$uibModal",function(e){var t=function(e,t,n){function a(a,i){switch(this.modalInstance=a,this.timeout=i,this.message=t,this.title=n,e){case"primary":this.optionPaneClass="option-pane-primary",this.optionPaneIcon="glyphicon glyphicon-tag",this.title=void 0===this.title?"Message":this.title;break;case"info":this.optionPaneClass="option-pane-info",this.optionPaneIcon="glyphicon-bell",this.title=void 0===this.title?"Information":this.title;break;case"success":this.optionPaneClass="option-pane-success",this.optionPaneIcon="glyphicon-ok",this.title=void 0===this.title?"Success":this.title;break;case"warning":this.optionPaneClass="option-pane-warning",this.optionPaneIcon="glyphicon-warning-sign",this.title=void 0===this.title?"Warning":this.title;break;case"danger":this.optionPaneClass="option-pane-danger",this.optionPaneIcon="glyphicon-remove",this.title=void 0===this.title?"Danger":this.title;break;default:this.optionPaneClass="option-pane-default",this.optionPaneIcon="glyphicon-bell",this.title=void 0===this.title?"Note":this.title}}return a.prototype={continue:function(){var e=this;this.timeout(function(){e.modalInstance.close()},250)}},["$uibModalInstance","$timeout",a]};this.message=function(n,a,i){e.open({animation:!0,backdrop:"static",ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"./app/util/dialog/option-pane.html",controller:t(n,a,i),controllerAs:"$ctrl",size:"md"})},this.primaryMessage=function(e,t){this.message("primary",e,t)},this.infoMessage=function(e,t){this.message("info",e,t)},this.successMessage=function(e,t){this.message("success",e,t)},this.warningMessage=function(e,t){this.message("warning",e,t)},this.dangerMessage=function(e,t){this.message("danger",e,t)},this.defaultMessage=function(e,t){this.message("default",e,t)}}])}(),function(){angular.module("appModule").service("ProgressPane",["$uibModal","$timeout",function(e,t){var n=function(e,t){function n(n,a){switch(this.modalInstance=n,this.timeout=a,this.title=t,this.title=void 0===this.title?"Loading...":this.title,e){case"primary":this.progressClass="progress-bar-primary",this.optionPaneClass="option-pane-primary";break;case"info":this.progressClass="progress-bar-info",this.optionPaneClass="option-pane-info";break;case"success":this.progressClass="progress-bar-success",this.optionPaneClass="option-pane-success";break;case"warning":this.progressClass="progress-bar-warning",this.optionPaneClass="option-pane-warning";break;case"danger":this.progressClass="progress-bar-danger",this.optionPaneClass="option-pane-danger";break;default:this.progressClass="progress-bar-default",this.optionPaneClass="option-pane-default"}}return n.prototype={continue:function(){var e=this;this.timeout(function(){e.modalInstance.close()},250)}},["$uibModalInstance","$timeout",n]};this.progress=function(a,i,o){var c=e.open({animation:!0,backdrop:"static",ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"./app/util/dialog/progress-pane.html",controller:n(a,i),controllerAs:"$ctrl",size:"md"});return{close:function(){t(function(){c.close()},1e3)}}},this.primaryProgress=function(e){return this.progress("primary",e)},this.infoProgress=function(e){return this.progress("info",e)},this.successProgress=function(e){return this.progress("success",e)},this.warningProgress=function(e){return this.progress("warning",e)},this.dangerProgress=function(e){return this.progress("danger",e)},this.defaultProgress=function(e){return this.progress("default",e)}}])}(),angular.module("appModule").service("ngDraggable",[function(){this.inputEvent=function(e){return angular.isDefined(e.touches)?e.touches[0]:angular.isDefined(e.originalEvent)&&angular.isDefined(e.originalEvent.touches)?e.originalEvent.touches[0]:e}}]),angular.module("appModule").directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(e,t,n,a,i){return{restrict:"A",link:function(o,c,r){o.value=r.ngDrag;var l,u,s,d,p,f,m,h,g=!1,v="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,y="touchmove mousemove",D=o.$id,b=null,L=null,A=!1,C=null,M=t(r.ngDragSuccess)||null,w=!angular.isDefined(r.allowTransform)||o.$eval(r.allowTransform),N=t(r.ngDragData),$=angular.noop,x=function(e){e&&(o.$on("$destroy",E),o.$watch(r.ngDrag,S),o.$watch(r.ngCenterAnchor,T),h?h.on("touchstart mousedown",P):c.on("touchstart mousedown",P),v||"img"!=c[0].nodeName.toLowerCase()||c.on("mousedown",function(){return!1}))},E=function(e){x(!1)},S=function(e,t){A=e},T=function(e,t){angular.isDefined(e)&&(g=e||"true")},I=function(e){return angular.isDefined(angular.element(e.target).attr("ng-cancel-drag"))},P=function(e){A&&(I(e)||"mousedown"==e.type&&0!=e.button||(v?(B(),C=setTimeout(function(){B(),U(e)},100),n.on(y,B),n.on("touchend mouseup",B)):U(e)))},B=function(){clearTimeout(C),n.off(y,B),n.off("touchend mouseup",B)},U=function(t){A&&(t.preventDefault(),l=c[0].getBoundingClientRect(),L=w?l:{left:document.body.scrollLeft,top:document.body.scrollTop},c.centerX=c[0].offsetWidth/2,c.centerY=c[0].offsetHeight/2,u=i.inputEvent(t).pageX,s=i.inputEvent(t).pageY,f=u-l.left,m=s-l.top,g?(d=u-c.centerX-a.pageXOffset,p=s-c.centerY-a.pageYOffset):(d=u-f-a.pageXOffset,p=s-m-a.pageYOffset),n.on(y,R),n.on("touchend mouseup",k),$=e.$on("draggable:_triggerHandlerMove",function(e,t){R(t)}))},R=function(t){A&&(t.preventDefault(),c.hasClass("dragging")||(b=N(o),c.addClass("dragging"),e.$broadcast("draggable:start",{x:u,y:s,tx:d,ty:p,event:t,element:c,data:b})),u=i.inputEvent(t).pageX,s=i.inputEvent(t).pageY,g?(d=u-c.centerX-L.left,p=s-c.centerY-L.top):(d=u-f-L.left,p=s-m-L.top),F(d,p),e.$broadcast("draggable:move",{x:u,y:s,tx:d,ty:p,event:t,element:c,data:b,uid:D}))},k=function(t){A&&(t.preventDefault(),e.$broadcast("draggable:end",{x:u,y:s,tx:d,ty:p,event:t,element:c,data:b,callback:q,uid:D}),c.removeClass("dragging"),c.parent().find(".drag-enter").removeClass("drag-enter"),O(),n.off(y,R),n.off("touchend mouseup",k),$())},q=function(e){M&&o.$apply(function(){M(o,{$data:b,$event:e})})},O=function(){w?c.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):c.css({position:"",top:"",left:""})},F=function(e,t){w?c.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+t+")"}):c.css({left:e+"px",top:t+"px",position:"fixed"})};!function(){if(c.attr("draggable","false"),c[0].querySelectorAll)var e=angular.element(c[0].querySelectorAll("[ng-drag-handle]"));else var e=c.find("[ng-drag-handle]");e.length&&(h=e),x(!0)}()}}}]).directive("ngDrop",["$parse","$timeout","$window","$document","ngDraggable",function(e,t,n,a,i){return{restrict:"A",link:function(n,i,o){n.value=o.ngDrop,n.isTouching=!1;var c=null,r=n.$id,l=!1,u=e(o.ngDropSuccess),s=e(o.ngDragStart),d=e(o.ngDragStop),p=e(o.ngDragMove),f=function(e){e&&(n.$watch(o.ngDrop,h),n.$on("$destroy",m),n.$on("draggable:start",g),n.$on("draggable:move",v),n.$on("draggable:end",y))},m=function(e){f(!1)},h=function(e,t){l=e},g=function(e,a){l&&(D(a.x,a.y,a.element),o.ngDragStart&&t(function(){s(n,{$data:a.data,$event:a})}))},v=function(e,a){l&&(D(a.x,a.y,a.element),o.ngDragMove&&t(function(){p(n,{$data:a.data,$event:a})}))},y=function(e,a){if(!l||r===a.uid)return void b(!1,a.element);D(a.x,a.y,a.element)&&(a.callback&&a.callback(a),o.ngDropSuccess&&t(function(){u(n,{$data:a.data,$event:a,$target:n.$eval(n.value)})})),o.ngDragStop&&t(function(){d(n,{$data:a.data,$event:a})}),b(!1,a.element)},D=function(e,t,a){var o=L(e,t);return n.isTouching=o,o&&(c=i),b(o,a),o},b=function(e,t){e?(i.addClass("drag-enter"),t.addClass("drag-over")):c==i&&(c=null,i.removeClass("drag-enter"),t.removeClass("drag-over"))},L=function(e,t){var n=i[0].getBoundingClientRect();return e-=a[0].body.scrollLeft+a[0].documentElement.scrollLeft,t-=a[0].body.scrollTop+a[0].documentElement.scrollTop,e>=n.left&&e<=n.right&&t<=n.bottom&&t>=n.top};!function(){f(!0)}()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(e,t,n){return{restrict:"A",link:function(e,t,n){var a,i=!0,o=null;e.clonedData={};var c=function(t){t&&(e.$on("draggable:start",l),e.$on("draggable:move",u),e.$on("draggable:end",s),r())},r=function(){a.off("mousedown touchstart touchmove touchend touchcancel",f),a.on("mousedown touchstart touchmove touchend touchcancel",f)},l=function(n,a,c){i=!0,angular.isDefined(a.data.allowClone)&&(i=a.data.allowClone),i&&(e.$apply(function(){e.clonedData=a.data}),t.css("width",a.element[0].offsetWidth),t.css("height",a.element[0].offsetHeight),p(a.tx,a.ty)),o=t[0].getBoundingClientRect()},u=function(e,t){i&&(_tx=t.tx+o.left,_ty=t.ty+o.top,p(_tx,_ty))},s=function(e,t){i&&d()},d=function(){t.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},p=function(e,n){t.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","z-index":99999,visibility:"visible","-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+n+")"})},f=function(e){var t=e;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1};!function(){a=t.find("img"),t.attr("draggable","false"),a.attr("draggable","false"),d(),c(!0)}()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(e,t){return{restrict:"A",link:function(e,t,n){var a=function(e){e&&t.on("mousedown touchstart touchmove touchend touchcancel",i)},i=function(e){var t=e.originalEvent;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1};!function(){t.attr("draggable","false"),a(!0)}()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(e,t,n){t.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]).directive("ngDragScroll",["$window","$interval","$timeout","$document","$rootScope",function(e,t,n,a,i){return{restrict:"A",link:function(t,n,o){var c=null,r={verticalScroll:o.verticalScroll||!0,horizontalScroll:o.horizontalScroll||!0,activationDistance:o.activationDistance||75,scrollDistance:o.scrollDistance||15},l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),u=!1,s=function(){function t(e){var n=Array.prototype.slice.call(arguments);u&&l(function(){i.$apply(function(){e.apply(null,n),t(e)})})}u=!0,t(function(){if(c){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),l=0,u=0;if(r.horizontalScroll&&(c.clientX<r.activationDistance?l=-r.scrollDistance:c.clientX>t-r.activationDistance&&(l=r.scrollDistance)),r.verticalScroll&&(c.clientY<r.activationDistance?u=-r.scrollDistance:c.clientY>o-r.activationDistance&&(u=r.scrollDistance)),0!==l||0!==u){var s=e.pageXOffset||a[0].documentElement.scrollLeft,d=e.pageYOffset||a[0].documentElement.scrollTop,p=n.css("transform");n.css("transform","initial"),e.scrollBy(l,u);var f=(e.pageXOffset||a[0].documentElement.scrollLeft)-s,m=(e.pageYOffset||a[0].documentElement.scrollTop)-d;n.css("transform",p),c.pageX+=f,c.pageY+=m,i.$emit("draggable:_triggerHandlerMove",c)}}})},d=function(){u=!1};t.$on("draggable:start",function(e,t){t.element[0]===n[0]&&(u||s())}),t.$on("draggable:end",function(e,t){t.element[0]===n[0]&&u&&d()}),t.$on("draggable:move",function(e,t){t.element[0]===n[0]&&(c=t.event)})}}}]),function(){angular.module("appModule").directive("btn",["rippleService",function(e){return{restrict:"C",link:e.ripple}}]).directive("fab",["rippleService",function(e){return{restrict:"C",link:e.ripple,scope:{show:"=fabShow"}}}]),angular.module("appModule").service("rippleService",["$timeout",function(e){this.ripple=function(t,n,a){void 0===t.show&&n.bind("click",function(t){t.preventDefault();var n=angular.element("<div/>"),a=this.getBoundingClientRect(),i=t.pageX-a.left,o=t.pageY-a.top;n.addClass("ripple-effect"),n.css("height",this.offsetWidth+"px"),n.css("width",this.offsetWidth+"px"),n.css({top:o-this.offsetWidth/2+"px",left:i-this.offsetWidth/2+"px"}),angular.element(this).append(n),e(function(){n.remove()},1e3)}),t.$watch("show",function(e,t){void 0!==e&&(n.hasClass("show")||n.hasClass("hide")?i(e):e?n.addClass("show"):n.addClass("hide"))});var i=function(t){n.removeClass("show"),n.removeClass("hide"),t?(n.addClass("show-start"),e(function(){n.addClass("show-active"),e(function(){n.addClass("show"),n.removeClass("show-active"),n.removeClass("show-start")},225)},250)):(n.addClass("hide-start"),n.addClass("hide-active"),e(function(){n.addClass("hide"),n.removeClass("hide-active"),n.removeClass("hide-start")},225))}}}])}(),function(){angular.module("appModule").filter("fixedLength",function(){return function(e,t){return(1e4+""+e).slice(-t)}})}(),function(){angular.module("appModule").directive("input",["focusService",function(e){return{restrict:"E",link:e.focus}}]),angular.module("appModule").service("focusService",function(){this.focus=function(e,t,n){t.bind("keypress",function(e){if(13===(e.keyCode||e.which)){e.preventDefault();for(var t=document.querySelectorAll("input, select, button"),n=e.srcElement,a=!1,i=t.length,o=0;o<i;o++){var c=t[o];if(a){if("none"!==c.style.display&&!1===c.disabled){c.focus();break}}else c===n&&(a=!0)}}})}})}(),angular.module("appModule").directive("grid",["gridService",function(e){return{restrict:"A",link:e.grid}}]),angular.module("appModule").service("gridService",function(){this.grid=function(e,t,n){var a={x:12,y:12},i=angular.fromJson(n.grid),o=i.x,c=i.y,r=i.w,l=i.h,u=i.color;t.css("position","absolute"),t.css("display","block"),t.css("width",r/a.x*100+"%"),t.css("height",l/a.y*100+"%"),t.css("left",o/a.x*100+"%"),t.css("top",c/a.y*100+"%"),t.css("background-color",u)}}),function(){angular.module("appModule").directive("smartInput",function(){function e(e,t){if(null!==e)if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}else e.setSelectionRange?(e.setSelectionRange(t,t),e.focus()):e.focus()}return{require:"?ngModel",restrict:"A",link:function(t,n,a,i){n.bind("focus",function(){try{this.selectionStart=0,this.selectionEnd=this.value.length+1}catch(e){this.select()}}),n.bind("blur",function(){o()}),i.$parsers.push(function(t){var o=n.val(),c=a.smartInput;if(void 0!==c&&""!==c||(c="text"),"decimal"===c||"integer"===c){for(;"0"===o.charAt(0);)o=o.substr(1);var r;"decimal"===c?(o=o.replace(/[^\d.\',']/g,""),r=parseInt(a.decimalPrecision),isNaN(r)&&(r=2)):"integer"===c&&(o=o.replace(/[^\d\',']/g,""),r=-1);var l=o.indexOf(".");l>=0&&(o=o.slice(0,l+1+r));var u=o.split("."),s=u[0],d=u[1];if(s=s.replace(/[^\d]/g,""),s.length>3)for(var p=Math.floor(s.length/3);p>0;){var f=s.indexOf(",");f<0&&(f=s.length),f-3>0&&(s=s.slice(0,f-3)+","+s.slice(f-3)),p--}d=void 0===d?"":"."+d;var m=s+d;m!==t&&(i.$setViewValue(m),i.$render());var h=parseFloat(m.replace(/[\',']/g,""));return isNaN(h)?0:h}if("date"===c){for(;"0"===o.charAt(0);)o=o.substr(1);o=o.replace(/[^\d\'#'\-]/g,""),console.log(o+"---");var g=o.split("-"),v=g[0],y=g[1],D=g[2];console.log(v+"+"+y+"+"+D);var b=-1;void 0===v?(v="#".repeat(4),b=0):(v=v.replace(/[^\d]/g,""),b=v.length,v=v.substr(0,4),v+="#".repeat(4-v.length)),void 0===y?(y="#".repeat(2),b=4===b?5:b):(y=y.replace(/[^\d]/g,""),parseInt(y)>12&&(y=""),b=4===b?5+y.length:b,y=y.substr(0,2),y+="#".repeat(2-y.length)),void 0===D?(D="#".repeat(2),b=7===b?8:b):(D=D.replace(/[^\d]/g,""),D>new Date(parseInt(v),parseInt(y),0).getDate()&&(D=""),b=7===b?8+D.length:b,D=D.substr(0,2),D+="#".repeat(2-D.length));var m=v+"-"+y+"-"+D;return m!==o&&(i.$setViewValue(m),i.$render(),e(n[0],b)),m.indexOf("#")>0?null:new Date(m)}});var o=function(){var e=n.val(),t=a.smartInput;if(void 0!==t&&""!==t||(t="text"),"decimal"===t){var i=parseInt(a.inputDecimal);isNaN(i)&&(i=2);var o=e.split("."),c=o[0],r=o[1];void 0!==c&&""!==c||(c="0"),void 0===r?r="0".repeat(i):r+="0".repeat(i-r.length),n.val(c+"."+r)}else"integer"===t?(void 0!==e&&""!==e||(e="0"),n.val(e)):"date"===t&&(void 0!==e&&""!==e||(e="####-##-##"),n.val(e))};n.ready(function(){o()})}}})}(),function(){angular.module("appModule").directive("inputHint",["InputHintService","$document","$compile",function(e,t,n){return{restrict:"A",scope:!0,link:e.inputHint}}]),angular.module("appModule").service("InputHintService",["$document","$compile",function(e,t){this.inputHint=function(n,a,i){var o=t('<div ng-class="tipClass">{{ text }}<div class="input-hint-arrow"></div></div>')(n);n.tipClass=["input-hint"],n.text=i.inputHint,i.tooltipPosition?n.tipClass.push("input-hint-"+i.tooltipPosition):n.tipClass.push("input-hint-down"),i.$set("placeholder",n.text),e.find("body").append(o),a.bind("focus",function(e){o.addClass("input-hint-show"),o=angular.element(o);var t=e.target.getBoundingClientRect(),n={},a=o[0].offsetHeight,i=o[0].offsetWidth,c=t.width||t.right-t.left,r=t.height||t.bottom-t.top;o.hasClass("input-hint-down")?(n.top=t.top+r+5,n.left=t.left-i/2+c/2):(n.top=t.top-a-5,n.left=t.left-i/2+c/2),o.css({top:n.top+"px",left:n.left+"px"})}),a.bind("blur",function(e){o.removeClass("input-hint-show")})}}])}(),function(){angular.module("appModule").service("ModalDialog",["$uibModal",function(e){this.showModel=function(t,n,a){e.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:n,controller:a,size:t})},this.modalOpen=function(e,t,n){return this.showModel(e,t,n)}}])}(),angular.module("appModule").directive("rangeSpinner",function(){return{restrict:"AE",scope:{rangeMin:"@",rangeStep:"@",rangeMax:"@",rangeDefaultValue:"@",acceptDecimal:"@",rangeModel:"=",nameOfField:"@",idOfField:"@",rangeDecimalPrecision:"@"},templateUrl:"tmpl/rangeSpinner.html",controller:["$scope","$element","$attrs",function(e,t,n){if(e.minRange=+(angular.isDefined(n.rangeMin)?n.rangeMin:0),e.step=+(angular.isDefined(n.rangeStep)?n.rangeStep:0),e.maxRange=+(angular.isDefined(n.rangeMax)?n.rangeMax:100),e.rangeDecPrec=+(angular.isDefined(n.rangeDecimalPrecision)?n.rangeDecimalPrecision:1),angular.isDefined(e.rangeDefaultValue)&&!isNaN(e.rangeDefaultValue)){var a=parseFloat(e.rangeDefaultValue);a>=e.minRange&&a<=e.maxRange?e.rangeModel=parseFloat(e.rangeDefaultValue).toFixed(e.rangeDecPrec):e.rangeModel=parseFloat(e.minRange).toFixed(e.rangeDecPrec)}e.rangePlusFunc=function(){angular.isUndefined(e.rangeModel)||isNaN(e.rangeModel)||""===e.rangeModel?e.rangeModel=e.minRange:e.rangeModel<e.maxRange&&("true"==e.acceptDecimal?e.rangeModel=parseFloat(parseFloat(e.rangeModel)+parseFloat(e.step)).toFixed(e.rangeDecPrec):e.rangeModel=parseInt(parseInt(e.rangeModel)+parseInt(e.step)))},e.rangeMinusFunc=function(){
angular.isUndefined(e.rangeModel)||isNaN(e.rangeModel)||""===e.rangeModel?e.rangeModel=e.minRange:e.rangeModel>e.minRange&&("true"==e.acceptDecimal?e.rangeModel=parseFloat(parseFloat(e.rangeModel)-parseFloat(e.step)).toFixed(e.rangeDecPrec):e.rangeModel=parseInt(parseInt(e.rangeModel)-parseInt(e.step)))},e.$watch(function(){return e.rangeModel},function(t,n){if(angular.isDefined(e.rangeModel))if(isNaN(e.rangeModel))e.rangeModel=n;else if(e.rangeModel>e.maxRange)e.rangeModel=e.maxRange;else if(e.rangeModel<e.minRange)e.rangeModel=e.minRange;else if("true"==e.acceptDecimal){var a=String(e.rangeModel).split(".");a.length>1&&a[1].length>e.rangeDecPrec&&(e.rangeModel=parseFloat(e.rangeModel).toFixed(e.rangeDecPrec))}else e.rangeModel=parseInt(e.rangeModel)},!0)}]}}).run(["$templateCache",function(e){e.put("tmpl/rangeSpinner.html",'<div class="input-group" style="width: 80px;">                         <span class="input-group-btn"> \t\t\t\t<button class="btn btn-primary" type="button" ng-click="rangeMinusFunc()" style="background: #9DA5BE !important;color: white! important;font-weight:700;">-</button> \t\t\t</span>                                 <input class="form-control" style="width: 50px;margin-top: 7px;font-weight:700;text-align: center;" name="{{nameOfField}}" id="{{idOfField}}" type="text" range-min="{{rangeMin}}" range-step="{{rangeStep}}" range-max="{{rangeMax}}" ng-model="rangeModel" required read-only/>  \t\t\t<span class="input-group-btn">                                 <button class="btn btn-primary" type="button" ng-click="rangePlusFunc()" style="background: #9DA5BE !important;color: white! important;font-weight:700;">+</button>\t\t\t</span> \t\t\t</div>')}]),function(){angular.module("appModule").service("optionPane",["$uibModal",function(e){var t=function(e,t,n){function a(a,i){switch(this.modalInstance=a,this.timeout=i,this.message=t,this.title=n,e){case"primary":this.optionPaneClass="option-pane-primary",this.optionPaneIcon="glyphicon glyphicon-tag",this.title=void 0===this.title?"Message":this.title;break;case"info":this.optionPaneClass="option-pane-info",this.optionPaneIcon="glyphicon-bell",this.title=void 0===this.title?"Information":this.title;break;case"success":this.optionPaneClass="option-pane-success",this.optionPaneIcon="glyphicon-ok",this.title=void 0===this.title?"Success":this.title;break;case"warning":this.optionPaneClass="option-pane-warning",this.optionPaneIcon="glyphicon-warning-sign",this.title=void 0===this.title?"Warning":this.title;break;case"danger":this.optionPaneClass="option-pane-danger",this.optionPaneIcon="glyphicon-remove",this.title=void 0===this.title?"Danger":this.title;break;default:this.optionPaneClass="option-pane-default",this.optionPaneIcon="glyphicon-bell",this.title=void 0===this.title?"Note":this.title}}return a.prototype={continue:function(){var e=this;this.timeout(function(){e.modalInstance.close()},250)}},["$uibModalInstance","$timeout",a]};this.message=function(n,a,i){e.open({animation:!0,backdrop:"static",ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"./app/util/option-pane/option-pane.html",controller:t(n,a,i),controllerAs:"$ctrl",size:"md"})},this.primaryMessage=function(e,t){this.message("primary",e,t)},this.infoMessage=function(e,t){this.message("info",e,t)},this.successMessage=function(e,t){this.message("success",e,t)},this.warningMessage=function(e,t){this.message("warning",e,t)},this.dangerMessage=function(e,t){this.message("danger",e,t)},this.defaultMessage=function(e,t){this.message("default",e,t)}}])}(),function(){angular.module("appModule").filter("unique",function(){return function(e,t){var n=[],a=[];return angular.forEach(e,function(e){var i=e[t];-1===a.indexOf(i)&&(a.push(i),n.push(e))}),n}})}(),function(){angular.module("appModule").run(["$rootScope","$location","$route","$timeout",function(e,t,n,a){e.config={},e.config.app_url=t.url(),e.config.app_path=t.path(),e.layout={},e.layout.loading=!1,e.$on("$routeChangeStart",function(t,n,i){n&&"/login"!==n.$$route.originalPath&&i&&"/login"!==i.$$route.originalPath&&a(function(){e.layout.loading=!0})}),e.$on("$routeChangeSuccess",function(){a(function(){e.layout.loading=!1},700)}),e.$on("$routeChangeError",function(){e.layout.loading=!1})}])}(),function(){angular.module("appModule").factory("XSRFInterceptor",["$cookies","$log",function(e,t){return{request:function(t){var n=e.get("XSRF-TOKEN");return n&&(t.headers["X-XSRF-TOKEN"]=n),t}}}]),angular.module("appModule").config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.defaults.withCredentials=!0,e.interceptors.push("XSRFInterceptor")}]),angular.module("appModule").run(["$rootScope","$location","$cookies","SecurityService",function(e,t,n,a){e.$on("$routeChangeStart",function(e,n,i){a.ping().success(function(e,n,a){"/login"===t.path()&&t.path("/")}).error(function(e,n){t.path("/login")})})}])}(),function(){var e=function(e,t){this.login=function(n){var a=n?{authorization:"Basic "+btoa(n.username+":"+n.password)}:{};return t.get(e.apiUrl+"/security/login",{headers:a})},this.logout=function(){return t.get(e.apiUrl+"/security/logout")},this.ping=function(){var n={"X-Requested-With":"XMLHttpRequest","Access-Control-Allow-Origin":"*"};return t.get(e.apiUrl+"/api/v1/system/environment/ping",{headers:n})}};e.$inject=["systemConfig","$http"],angular.module("appModule").service("SecurityService",e)}();